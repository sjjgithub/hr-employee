webpackJsonp([1],{"++CP":function(e,t,a){function o(e){return a(i(e))}function i(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var r={"./af":"0lMz","./af.js":"0lMz","./ar":"T8Od","./ar-dz":"jRcc","./ar-dz.js":"jRcc","./ar-kw":"fKSY","./ar-kw.js":"fKSY","./ar-ly":"VQxJ","./ar-ly.js":"VQxJ","./ar-ma":"aIuB","./ar-ma.js":"aIuB","./ar-sa":"NdkZ","./ar-sa.js":"NdkZ","./ar-tn":"hx6D","./ar-tn.js":"hx6D","./ar.js":"T8Od","./az":"eScA","./az.js":"eScA","./be":"t0bM","./be.js":"t0bM","./bg":"dST2","./bg.js":"dST2","./bm":"DI3D","./bm.js":"DI3D","./bn":"gcxo","./bn.js":"gcxo","./bo":"V4eS","./bo.js":"V4eS","./br":"IUxT","./br.js":"IUxT","./bs":"qoKC","./bs.js":"qoKC","./ca":"Qk4s","./ca.js":"Qk4s","./cs":"1DQM","./cs.js":"1DQM","./cv":"sKnm","./cv.js":"sKnm","./cy":"iZRQ","./cy.js":"iZRQ","./da":"/QC6","./da.js":"/QC6","./de":"yEGP","./de-at":"to4g","./de-at.js":"to4g","./de-ch":"tPSU","./de-ch.js":"tPSU","./de.js":"yEGP","./dv":"p+TI","./dv.js":"p+TI","./el":"dO5D","./el.js":"dO5D","./en-au":"HWGY","./en-au.js":"HWGY","./en-ca":"INYw","./en-ca.js":"INYw","./en-gb":"cvuh","./en-gb.js":"cvuh","./en-ie":"OT40","./en-ie.js":"OT40","./en-nz":"84Cq","./en-nz.js":"84Cq","./eo":"bal4","./eo.js":"bal4","./es":"lhea","./es-do":"wUe4","./es-do.js":"wUe4","./es-us":"2xVz","./es-us.js":"2xVz","./es.js":"lhea","./et":"qOq7","./et.js":"qOq7","./eu":"BYx3","./eu.js":"BYx3","./fa":"ywtE","./fa.js":"ywtE","./fi":"dv5Q","./fi.js":"dv5Q","./fo":"cq9W","./fo.js":"cq9W","./fr":"HB2j","./fr-ca":"9E4L","./fr-ca.js":"9E4L","./fr-ch":"k5NR","./fr-ch.js":"k5NR","./fr.js":"HB2j","./fy":"m7QH","./fy.js":"m7QH","./gd":"QlwK","./gd.js":"QlwK","./gl":"ra7s","./gl.js":"ra7s","./gom-latn":"7xFm","./gom-latn.js":"7xFm","./gu":"44jg","./gu.js":"44jg","./he":"vXZD","./he.js":"vXZD","./hi":"swSN","./hi.js":"swSN","./hr":"k0li","./hr.js":"k0li","./hu":"btD9","./hu.js":"btD9","./hy-am":"EpLa","./hy-am.js":"EpLa","./id":"Umv/","./id.js":"Umv/","./is":"JV2W","./is.js":"JV2W","./it":"/Rwy","./it.js":"/Rwy","./ja":"4CqZ","./ja.js":"4CqZ","./jv":"tDdO","./jv.js":"tDdO","./ka":"Eo5O","./ka.js":"Eo5O","./kk":"Zl3J","./kk.js":"Zl3J","./km":"BLur","./km.js":"BLur","./kn":"13xY","./kn.js":"13xY","./ko":"kqcY","./ko.js":"kqcY","./ky":"/XUa","./ky.js":"/XUa","./lb":"JvgX","./lb.js":"JvgX","./lo":"ox95","./lo.js":"ox95","./lt":"C7TI","./lt.js":"C7TI","./lv":"VHXO","./lv.js":"VHXO","./me":"sZzm","./me.js":"sZzm","./mi":"M9rI","./mi.js":"M9rI","./mk":"upW9","./mk.js":"upW9","./ml":"9eLH","./ml.js":"9eLH","./mr":"+Oxt","./mr.js":"+Oxt","./ms":"QxO8","./ms-my":"B12o","./ms-my.js":"B12o","./ms.js":"QxO8","./my":"ueXE","./my.js":"ueXE","./nb":"NsoZ","./nb.js":"NsoZ","./ne":"om0d","./ne.js":"om0d","./nl":"3cSw","./nl-be":"kiNj","./nl-be.js":"kiNj","./nl.js":"3cSw","./nn":"gUEN","./nn.js":"gUEN","./pa-in":"taPa","./pa-in.js":"taPa","./pl":"z6Mc","./pl.js":"z6Mc","./pt":"kb8k","./pt-br":"B3nK","./pt-br.js":"B3nK","./pt.js":"kb8k","./ro":"QnZP","./ro.js":"QnZP","./ru":"wcwb","./ru.js":"wcwb","./sd":"OuJd","./sd.js":"OuJd","./se":"TzG/","./se.js":"TzG/","./si":"HKBZ","./si.js":"HKBZ","./sk":"Rqoz","./sk.js":"Rqoz","./sl":"Qjir","./sl.js":"Qjir","./sq":"atpr","./sq.js":"atpr","./sr":"5MaP","./sr-cyrl":"VIiZ","./sr-cyrl.js":"VIiZ","./sr.js":"5MaP","./ss":"Wvjm","./ss.js":"Wvjm","./sv":"gEVS","./sv.js":"gEVS","./sw":"wB58","./sw.js":"wB58","./ta":"I6dH","./ta.js":"I6dH","./te":"DeAG","./te.js":"DeAG","./tet":"DdLP","./tet.js":"DdLP","./th":"pjQk","./th.js":"pjQk","./tl-ph":"ww/h","./tl-ph.js":"ww/h","./tlh":"vsaK","./tlh.js":"vsaK","./tr":"zRyb","./tr.js":"zRyb","./tzl":"K8o2","./tzl.js":"K8o2","./tzm":"wjGI","./tzm-latn":"ekld","./tzm-latn.js":"ekld","./tzm.js":"wjGI","./uk":"BvWc","./uk.js":"BvWc","./ur":"loaN","./ur.js":"loaN","./uz":"pGBa","./uz-latn":"vfSh","./uz-latn.js":"vfSh","./uz.js":"pGBa","./vi":"yvvJ","./vi.js":"yvvJ","./x-pseudo":"sCb5","./x-pseudo.js":"sCb5","./yo":"weWF","./yo.js":"weWF","./zh-cn":"76WY","./zh-cn.js":"76WY","./zh-hk":"oUMl","./zh-hk.js":"oUMl","./zh-tw":"MRkg","./zh-tw.js":"MRkg"};o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id="++CP"},"00NG":function(e,t){},"0qmK":function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof__=__webpack_require__("hRKE"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof__),__WEBPACK_IMPORTED_MODULE_1_vue__=__webpack_require__("XwMK");!function(window){var Common={};Common.formatChinaTime=function(e,t){var a=new Date(e),o=function(e){return(e<10?"0":"")+e};return t.replace(/yyyy|MM|dd|HH|mm|ss/g,function(e){switch(e){case"yyyy":return o(a.getFullYear());case"MM":return o(a.getMonth()+1);case"mm":return o(a.getMinutes());case"dd":return o(a.getDate());case"HH":return o(a.getHours());case"ss":return o(a.getSeconds())}})},Common.strCutout=function(e,t){for(var a=e.split(t),o=[],i=0;i<a.length;i++)o.push(a[i]);return o},Common.addProperty=function(obj1,obj2){for(var r in obj2)eval("obj1."+r+"=obj2."+r);return obj1},Common.deepCopyObj=function(e){if("object"!=(void 0===e?"undefined":__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof___default()(e)))return e;var t={};for(var a in e)t[a]=Common.deepCopyObj(e[a]);return t},window.Common=Common}(window),Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),"S+":this.getMilliseconds()};/(y+)/i.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e},__WEBPACK_IMPORTED_MODULE_1_vue__.default.filter("dateMin",function(e){return e?new Date(e).format("yyyy-MM-dd hh:mm"):"-"}),__WEBPACK_IMPORTED_MODULE_1_vue__.default.filter("dateD",function(e){return e?new Date(e).format("yyyy-MM-dd"):"-"}),__WEBPACK_IMPORTED_MODULE_1_vue__.default.filter("timeFormat",function(e,t){return e?new Date(e).format(t):"-"});var _unused_webpack_default_export={install:function(e){e.Common}}},"0ub9":function(e,t){},"1U02":function(e,t){},"5+O1":function(e,t){},"5Cmq":function(e,t){},"7L+B":function(e,t){},"8zwx":function(e,t){},"9wKo":function(e,t){},BujW:function(e,t){},HNlo:function(e,t){},HThv:function(e,t){},IlZs:function(e,t,a){e.exports=a.p+"static/img/u1520.e344e96.png"},KdmY:function(e,t){},MIXo:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("7L+B"),a("5+O1"),a("XBGE"),a("5Cmq");var o=a("XwMK"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("div",{staticClass:"app-content"},[t("router-view")],1)])},staticRenderFns:[]},r=a("OF7X")({name:"app"},i,!1,function(e){a("HThv")},null,null).exports,s=a("zO6J"),n=a("3cXf"),l=a.n(n),c=a("aA9S"),d=a.n(c),f="",p="",m="",u={other:"网络问题稍后重试",E001:"参数校验失败",E100:"合同信息已存在",E101:"添加入职申请失败",E201:"添加合同失败",E301:"添加薪酬失败"},h=["base-info","contact","education","family","position","technology","work","shengao"];f="http://127.0.0.1:8080/hrRecruit-api",p="http://127.0.0.1:8080/hrSSO",m="http://127.0.0.1:8080/ctrlHR";var b=a("cTJt"),v=a.n(b);console.log(m);var g={props:{value:{},placeholder:{type:String,default:"请选择"},size:{type:String,default:"mini"},multiple:{type:Boolean,default:!0},filterOrg:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{cheeckAll:!0,filterText:"",selectFilter:"",deptShow:!1,selects:[],list:[],defaultProps:{children:"childDept",label:"name"},api:m+"/api/getDeptTree"}},created:function(){var e=this.$mount();document.querySelector("body").appendChild(e.$refs.deptDialog.$el)},computed:{depts:function(){var e=[];return this.selects.length&&this.selects.forEach(function(t){e.push(t.name)}),e.join(",")},opens:function(){var e=[];if(this.list.length)return this.list.forEach(function(t){e.push(t.id)}),e}},mounted:function(){this.getDepts()},watch:{filterText:function(e){this.$refs.companyTree.filter(e)},value:function(){this.initSelects()}},methods:{getDepts:function(){var e=this;e.$http.get(e.api).then(function(t){e.list=200==t.data.code?t.data.data:[],e.initSelects(!0)})},startSelect:function(){var e=this;e.deptShow=!0,e.$nextTick(function(){e.initSelects()})},initSelects:function(e){var t=this,a=[];if(t.list.length){var o=[];t.multiple?o=t.value:t.value&&o.push(parseInt(t.value)),o.length?function o(i,r){i.forEach(function(i){r.indexOf(i.id)>=0?(!e&&t.$refs.companyTree&&t.$refs.companyTree.setChecked(i,!0),a.push(i)):!e&&t.$refs.companyTree&&t.$refs.companyTree.setChecked(i,!1),i[t.defaultProps.children]&&i[t.defaultProps.children].length&&o(i[t.defaultProps.children],r)})}(t.list,o):t.$refs.companyTree&&t.$refs.companyTree.setCheckedKeys([])}t.selects=a},renderTree3:function(e,t){var a=this,o=(t.node,t.data);t.store;return a.multiple?e("span",{class:"tree-table-row"},[e("span",null,[o.name,o.check]),e("span",{class:"tree-table-cell",style:"text-align:center;margin-right:20px"},[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return a.addChildren(o)}}},["添加子部门"])])]):e("span",{class:"tree-table-row"},[e("span",null,[o.name,o.check]),e("span",{class:"tree-table-cell",style:"text-align:center;margin-right:20px"},[])])},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},deleteIt:function(e){this.$refs.companyTree.setChecked(e,!1)},toogleIt:function(e,t){if(t)this.multiple?this.selects.push(e):(this.$refs.companyTree.setCheckedKeys([e.id]),this.selects=[e]);else{var a=this.selects.indexOf(e);a>=0&&this.selects.splice(a,1)}},addChildren:function(e){var t=this;e[t.defaultProps.children]&&e[t.defaultProps.children].length&&e[t.defaultProps.children].forEach(function(e){t.selects.indexOf(e)<0&&t.$refs.companyTree.setChecked(e,!0),e[t.defaultProps.children]&&e[t.defaultProps.children].length&&t.addChildren(e)})},getSelectedIds:function(){var e=[];return this.selects.forEach(function(t){e.push(t.id)}),e},deleteAll:function(){this.$emit("input",[])},reserSelect:function(){this.$refs.companyTree.setCheckedKeys([])},sureIt:function(){var e;e=this.multiple?this.getSelectedIds():this.getSelectedIds().join(","),this.$emit("input",e),this.filterText="",this.selectFilter="",this.deptShow=!1},calcIt:function(){this.filterText="",this.selectFilter="",this.initSelects(),this.deptShow=!1}}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"dept"},[a("span",{staticClass:"selVal"},[e.depts.length>13?a("el-tooltip",{attrs:{content:e.depts,placement:"top"}},[a("el-input",{staticClass:"deptInput",attrs:{size:e.size,value:e.depts.length<13?e.depts:e.depts.substr(0,12)+"…",placeholder:e.placeholder,disabled:e.disabled},on:{focus:e.startSelect}},[a("i",{staticClass:"el-icon-menu el-input__icon",attrs:{slot:"suffix"},on:{click:e.deleteAll},slot:"suffix"})])],1):a("el-input",{staticClass:"deptInput",attrs:{size:e.size,value:e.depts.length<13?e.depts:e.depts.substr(0,12)+"…",placeholder:e.placeholder,disabled:e.disabled},on:{focus:e.startSelect}},[a("i",{staticClass:"el-icon-menu el-input__icon",attrs:{slot:"suffix"},on:{click:e.deleteAll},slot:"suffix"})])],1),e._v(" "),a("el-dialog",{directives:[{name:"show",rawName:"v-show",value:e.deptShow,expression:"deptShow"}],ref:"deptDialog",staticClass:"deptDialog",class:{multiple:e.multiple},attrs:{title:"部门选择","modal-append-to-body":!1,visible:e.deptShow,"before-close":e.calcIt},on:{"update:visible":function(t){e.deptShow=t}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"clearfix",attrs:{span:e.multiple?12:24}},[a("el-card",{staticClass:"box-card left",attrs:{"body-style":{padding:0}}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"line-height":"36px"}},[e._v("所有部门")]),e._v(" "),a("el-input",{staticClass:"filter right",attrs:{placeholder:"输入关键字进行检索"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1),e._v(" "),a("el-tree",{ref:"companyTree",staticStyle:{"text-align":"left","font-size":"14px"},attrs:{data:e.list,size:"small",props:e.defaultProps,"node-key":"id","show-checkbox":"","check-strictly":"","default-expanded-keys":e.opens,"filter-node-method":e.filterNode,"render-content":e.renderTree3},on:{"check-change":e.toogleIt}})],1)],1),e._v(" "),e.multiple?a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card right"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"line-height":"36px"}},[e._v("已选部门")]),e._v(" "),a("span",{staticClass:"right dis-inline"},[a("el-input",{staticClass:"selectFilter",attrs:{placeholder:"请输入关键字检索"},model:{value:e.selectFilter,callback:function(t){e.selectFilter=t},expression:"selectFilter"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.reserSelect}},[e._v("清空")])],1)]),e._v(" "),a("el-row",e._l(e.selects,function(t){return a("el-col",{key:t.id,staticClass:"tex-center",attrs:{span:6}},[t.name.indexOf(e.selectFilter)>-1?a("el-tag",{key:t.id,staticClass:"tex-center",attrs:{closable:!0,"close-transition":!0,title:t.name},on:{close:function(a){e.deleteIt(t)}}},[e._v(e._s(t.name)+"\r\n\t\t\t\t\t            ")]):e._e()],1)}))],1)],1):e._e()],1),e._v(" "),a("div",{staticClass:"submit"},[a("el-button",{attrs:{type:"primary"},on:{click:e.sureIt}},[e._v("确认")]),e._v(" "),a("el-button",{on:{click:e.calcIt}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]},_=a("OF7X")(g,y,!1,function(e){a("HNlo"),a("ur6g")},"data-v-6a8200e6",null).exports,k={props:{value:{},multiple:{type:Boolean,default:!1},filterOrg:{type:Boolean,default:!1},relatedDept:{},placeholder:{type:String,default:"请选择"},size:{type:String,default:"mini"},clearable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},showAll:{type:Boolean,default:!1},notShow:{type:Boolean,default:!1}},data:function(){return{loading:!1,positionIds:this.multiple?[]:"",positionList:[],all:[],init:[],timer:null}},computed:{deptIds:function(){return this.relatedDept||[]},api:function(){var e="";return e=this.showAll?"/api/job/dropDownList?":this.filterOrg?"/api/job/simpleList?":"/api/jobList?",{list:m+e}}},mounted:function(){this.positionIds=this.value,this.getAll()},watch:{deptIds:function(e){this.search(),this.positionIds=this.multiple?[]:""},positionIds:function(e){this.$emit("input",e)},value:function(e){this.positionIds=e}},methods:{delaySearch:function(e){var t=this;t.timer&&clearTimeout(t.timer),t.timer=setTimeout(function(){t.search(e)},500)},search:function(e){this.positionList=[];var t=!0;if(isNaN(this.deptIds)&&(this.deptIds.length||(t=!1)),this.notShow){if(!t&&!e)return void(this.positionList=this.all)}else if(!t&&!e)return;var a=this,o={};a.loading=!0,e&&!a.filterOrg&&(o.keyword=e),o.deptIds=a.deptIds,a.$http.get(a.api.list+Util.parseForm(o)).then(function(e){var t=[];if("200"==e.data.code){t=a.showAll||a.filterOrg?e.data.data:e.data.data.list;a.init.length&&a.multiple&&a.init.forEach(function(e,o){t.length&&t.forEach(function(t){e.id==t.id&&a.init.splice(o,1)})})}a.positionList=a.init.concat(t),a.loading=!1})},getAll:function(){var e=this;this.$http.get(e.api.list).then(function(t){"200"==t.data.code&&(e.all=e.showAll?t.data.data:t.data.data.list),e.getInit()})},getInit:function(){if(this.multiple){for(var e=this,t=[],a=0;a<this.positionIds.length;a++)this.all.length&&this.all.forEach(function(o){o.id==e.positionIds[a]&&t.push(o)});this.init=t}this.search()}}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.multiple?a("el-select",{attrs:{disabled:e.disabled,filterable:"",remote:"",placeholder:e.placeholder,size:e.size,clearable:e.clearable,multiple:"","remote-method":e.delaySearch,loading:e.loading},model:{value:e.positionIds,callback:function(t){e.positionIds=t},expression:"positionIds"}},e._l(e.positionList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})):a("el-select",{attrs:{filterable:"",remote:"","remote-method":e.delaySearch,disabled:e.disabled,placeholder:e.placeholder,size:e.size,clearable:e.clearable},model:{value:e.positionIds,callback:function(t){e.positionIds=t},expression:"positionIds"}},e._l(e.positionList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))},staticRenderFns:[]},I=a("OF7X")(k,w,!1,function(e){a("pLCs")},null,null).exports,x={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"pageTop clearfix"},[t("div",{staticClass:"pageTopCont"},[t("div",{staticClass:"title"},[this._v(this._s(this.pageTitle))]),this._v(" "),t("div",{staticClass:"intro"},[this._v(this._s(this.pageDescription))])]),this._v(" "),t("div",{staticClass:"pageTopSlot clearfix"},[this._t("default")],2)])},staticRenderFns:[]},D=a("OF7X")({props:["pageTitle","pageDescription"]},x,!1,function(e){a("cept")},null,null).exports,$={props:{add:{type:Boolean,default:!0},size:{type:String,default:"small"},id:{},employeeCode:{}},data:function(){return{show:!1,loading:{save:!1},form:{treatyid:"",newtreatytype:"1",treatytype:"",treatydate:"",treatybegin:"",treatylast:"",treatyend:"",remark:"",files:[]},rules:{treatyid:[{required:!0,message:"请输入合同编号"}],treatytype:[{required:!0,message:"请选择合同类型"}],treatydate:[{required:!0,message:"请选择合同签订日",type:"date",trigger:"change"}],treatylast:[{required:!0,message:"请选择合同期限"},{pattern:/^[1-9]\d*$/,message:"年限只能输入正整数"}],treatybegin:[{required:!0,message:"请选择合同起始日"}],treatyend:[{required:!0,message:"请选择合同结束日"}]},api:{save:m+"/api/contract/save",update:m+"/api/contract/update",detail:m+"/api/contract/getInfo",upFile:m+"/api/contract/upload"}}},watch:{"form.treatytype":function(e){1==e?(this.rules.treatybegin=[{required:!0,message:"请选择合同起始日"}],this.rules.treatylast=[{required:!0,message:"请选择合同期限"},{pattern:/^[1-9]\d*$/,message:"年限只能输入正整数"}],this.rules.treatyend=[{required:!0,message:"请选择合同结束日"}]):(delete this.rules.treatybegin,delete this.rules.treatyend,delete this.rules.treatylast,this.form.treatyend="",this.form.treatybegin="",this.form.treatylast="")},"form.treatybegin":function(e){this.form.treatylast&&(e?v()(this.form.treatybegin).add(-1,"day").format("MM-DD")!=v()(this.form.treatyend).format("MM-DD")&&(this.form.treatyend=v()(e).add(this.form.treatylast,"y").add(-1,"day")):this.form.treatyend="")},"form.treatylast":function(e){e?v()(this.form.treatybegin).add(-1,"day").format("MM-DD")!=v()(this.form.treatyend).format("MM-DD")&&(this.form.treatybegin&&(this.form.treatyend=v()(this.form.treatybegin).add(e,"y").add(-1,"day")),this.form.treatyend&&(this.form.treatybegin=v()(this.form.treatyend).add(-1*e,"y").add(1,"day"))):this.form.treatybegin&&this.form.treatyend&&(this.form.treatyend="")},"form.treatyend":function(e){this.form.treatylast&&(e?v()(this.form.treatybegin).add(-1,"day").format("MM-DD")!=v()(this.form.treatyend).format("MM-DD")&&(this.form.treatybegin=v()(e).add(-1*this.form.treatylast,"y").add(1,"day")):this.form.treatybegin="")}},created:function(){this.form.treatyid=this.employeeCode},mounted:function(){},methods:{open:function(){this.employeeCode?(this.add||this.getInfo(),this.show=!0):this.$message.error({message:"请先确定员工编号才能新增合同",duration:2e4,showClose:!0})},getInfo:function(){var e=this;this.$http.get(e.api.detail,{params:{id:this.id}}).then(function(t){var a=t.data;if("200"==a.code)if(e.form=a.data,e.form.treatydate=e.form.treatydate?new Date(e.form.treatydate):"",e.form.treatybegin=e.form.treatybegin?new Date(e.form.treatybegin):"",e.form.treatyend=e.form.treatyend?new Date(e.form.treatyend):"",e.form.path){var o=e.form.path.split(",").map(function(e){var t=e.lastIndexOf("/");return{name:e.substring(t+1),url:e}});e.form.files=o}else e.form.files=[]})},save:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a={treatyid:t.form.treatyid,newtreatytype:t.form.newtreatytype,treatytype:t.form.treatytype,remark:t.form.remark,employeecode:t.employeeCode,treatydate:v()(t.form.treatydate).format("x")};if(1==t.form.treatytype&&(a.treatybegin=v()(t.form.treatybegin).format("x"),a.treatyend=v()(t.form.treatyend).format("x"),a.treatylast=t.form.treatylast),t.form.files.length&&(a.filePaths=t.form.files.reduce(function(e,t){return e+","+(t.response&&"success"==t.status?t.response.data[0].filePath:t.url)},"").substring(1)),t.add)var o=t.api.save;else{a.id=t.id;o=t.api.update}t.loading.save=!0,t.$http.get(o,{params:a}).then(function(e){var a=e.data;t.loading.save=!1,"200"==a.code?(t.$message.success((t.add?"新建":"编辑")+"合同成功"),t.$emit("update"),t.show=!1):t.$message.error({message:a.msg,duration:2e4,showClose:!0})}).catch(function(){t.loading.save=!1})}})},resert:function(e){this.$refs[e]&&this.$refs[e].resetFields()},upFile:function(e,t){this.form.files=t},upBefore:function(e){var t=this,a=!0;return this.form.files.forEach(function(o){if("success"==o.status&&e.name==o.name)return t.$message.error("文件不能重复上传"),void(a=!1)}),a?["image/jpg","image/png"].indexOf(e.type)<0?(this.$message.error("只能上传jpg/png文件"),!1):e.size>512e4?(this.$message.error(e.name+"文件大于5M已取消其上传"),!1):void 0:a},upError:function(e,t,a){this.$message.error(t.name+"上传失败")},removeFile:function(e,t){this.form.files=t},openFile:function(e){var t="";t=e.response?e.response.data[0].filePath:e.url,window.open(t)}}},C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"conytact-setting"},[a("el-button",{attrs:{size:e.size,type:e.add?"primary":"text"},on:{click:e.open}},[e._v(e._s(e.add?"新建合同":"编辑"))]),e._v(" "),a("el-dialog",{attrs:{center:!0,"modal-append-to-body":!1,visible:e.show,title:(e.add?"新建":"编辑")+"合同","close-on-click-modal":!1},on:{"update:visible":function(t){e.show=t},open:function(t){e.resert("form")}}},[a("el-form",{ref:"form",attrs:{size:"small",rules:e.rules,model:e.form,"label-width":"115px","label-position":"right"}},[a("el-form-item",{attrs:{prop:"newtreatytype",label:"新签合同方式",required:""}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.form.newtreatytype,callback:function(t){e.$set(e.form,"newtreatytype",t)},expression:"form.newtreatytype"}},[a("el-radio-button",{attrs:{label:"1"}},[e._v("新增合同")]),e._v(" "),a("el-radio-button",{attrs:{label:"2"}},[e._v("续签合同")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"treatyid",label:"合同编号",required:""}},[a("el-input",{attrs:{placeholder:"请输入合同编号",disabled:""},model:{value:e.form.treatyid,callback:function(t){e.$set(e.form,"treatyid",t)},expression:"form.treatyid"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"treatytype",label:"合同类型",required:""}},[a("el-select",{attrs:{size:"small"},model:{value:e.form.treatytype,callback:function(t){e.$set(e.form,"treatytype",t)},expression:"form.treatytype"}},[a("el-option",{attrs:{label:"固定期",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"无固定期",value:"2"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"treatydate",label:"合同签订日"}},[a("el-date-picker",{attrs:{type:"date",size:"small",clearable:"",placeholder:"请选择"},model:{value:e.form.treatydate,callback:function(t){e.$set(e.form,"treatydate",t)},expression:"form.treatydate"}})],1)],1),e._v(" "),2!=e.form.treatytype?[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"treatybegin",label:"合同起始日"}},[a("el-date-picker",{attrs:{type:"date",size:"small",clearable:"",placeholder:"请选择"},model:{value:e.form.treatybegin,callback:function(t){e.$set(e.form,"treatybegin",t)},expression:"form.treatybegin"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"treatylast",label:"合同期限(年)"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入合同期限"},model:{value:e.form.treatylast,callback:function(t){e.$set(e.form,"treatylast",t)},expression:"form.treatylast"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"treatyend",label:"合同结束日"}},[a("el-date-picker",{attrs:{type:"date",size:"small",clearable:"",placeholder:"请选择"},model:{value:e.form.treatyend,callback:function(t){e.$set(e.form,"treatyend",t)},expression:"form.treatyend"}})],1)],1)]:e._e()],2),e._v(" "),a("el-form-item",{attrs:{prop:"remark",label:"备注"}},[a("el-input",{attrs:{type:"textarea",size:"small",placeholder:"请输入备注内容"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"files",label:"合同附件"}},[a("el-upload",{ref:"upload",attrs:{"list-type":"picture",accept:"image/jpg,image/png",multiple:"","on-preview":e.openFile,"on-remove":e.removeFile,action:e.api.upFile,"on-change":e.upFile,"before-upload":e.upBefore,"on-error":e.upError,"file-list":e.form.files}},[a("el-button",{attrs:{size:"small",type:"primary",icon:"upload2"}},[e._v("上传附件")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过5M")])],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",loading:e.loading.save},on:{click:function(t){e.save("form")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){e.show=!1}}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]},j={components:{pageTop:D,contractSetting:a("OF7X")($,C,!1,function(e){a("9wKo")},null,null).exports},props:{employeeCode:{}},data:function(){return{moment:v.a,kw:"",pagination:{page:1,pageSize:10,sizes:[10,20,30]},loading:{delete:!1,search:!1},conytact:{list:[],totalCount:1},selects:[],api:{list:m+"/api/contract/list",del:m+"/api/contract/delete"}}},computed:{},mounted:function(){this.getList()},methods:{search:function(){this.pagination.page=1,this.getList()},getList:function(){if(this.employeeCode){var e={pageSize:9999,employeeCode:this.employeeCode},t=this;t.loading.search=!0,this.$http.get(t.api.list,{params:e}).then(function(e){var a=e.data;t.loading.search=!1,"200"==a.code&&(t.conytact=a.data)}).catch(function(){t.loading.search=!1})}},del:function(e){var t=this;e||(e=this.selects.reduce(function(e,t){return e+","+t.id},"").substring(1)),t.loading.delete=!0,this.$http.get(t.api.del,{params:{ids:e}}).then(function(e){var a=e.data;t.loading.delete=!1,"200"==a.code?(t.$message.success("合同删除成功"),t.getList()):t.$message.error({message:a.msg||"未知错误，稍后重试",duration:2e4,showClose:!0})}).catch(function(){t.loading.delete=!1})}}},S={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contract"},[a("page-top",{staticStyle:{"margin-bottom":"1rem","padding-top":"0"},attrs:{"page-title":"合同信息","page-description":"在这里您可以合同进行管理"}}),e._v(" "),a("div",{staticStyle:{"margin-bottom":"20px"}},[a("el-button",{attrs:{size:"small",loading:e.loading.delete},on:{click:function(t){e.del()}}},[e._v("删除")]),e._v(" "),a("div",{staticClass:"fr"},[a("el-input",{attrs:{size:"small",placeholder:"输入检索内容"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.search(t)}},model:{value:e.kw,callback:function(t){e.kw=t},expression:"kw"}},[a("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},on:{click:e.search},slot:"suffix"})]),e._v(" "),a("contract-setting",{attrs:{add:!0,size:"small","employee-code":e.employeeCode},on:{update:e.getList}})],1)],1),e._v(" "),a("el-table",{attrs:{data:e.conytact.list,stripe:"",loading:e.loading.search},on:{"selection-change":function(t){e.selects=t}}},[a("el-table-column",{attrs:{label:"全选",type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{label:"合同编号",align:"center",prop:"treatyid","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"合同类型",align:"center",prop:"treatytype","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n\t\t\t\t"+e._s(1==t.row.treatytype?"新签和同":"续签合同")+"\r\n\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"合同签订日",align:"center",prop:"treatydate","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n\t\t\t\t"+e._s(t.row.treatydate?e.moment(t.row.treatydate).format("YYYY-MM-DD"):"-")+"\r\n\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"合同起始日",align:"center",prop:"treatybegin","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n\t\t\t\t"+e._s(t.row.treatybegin?e.moment(t.row.treatybegin).format("YYYY-MM-DD"):"-")+"\r\n\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"合同年限",align:"center",prop:"treatylast","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n\t\t\t\t"+e._s(t.row.treatylast||"-")+"\r\n\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"合同终止日",align:"center",prop:"treatylast","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n\t\t\t\t"+e._s(t.row.treatyend?e.moment(t.row.treatyend).format("YYYY-MM-DD"):"-")+"\r\n\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",prop:"treatyend","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("contract-setting",{attrs:{add:!1,size:"small",employeeCode:e.employeeCode,id:t.row.id},on:{update:e.getList}}),e._v(" "),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){e.del(t.row.id)}}},[e._v("删除")])]}}])})],1)],1)},staticRenderFns:[]},O=a("OF7X")(j,S,!1,function(e){a("00NG")},null,null).exports,T={props:{value:{type:Object}},data:function(){return{firstOpen:!0,educationList:[{beginDate:"",endDate:"",school:"",profession:"",education:""}],educationOptions:[{label:"高中"},{label:"中专"},{label:"大专"},{label:"本科"},{label:"硕士"},{label:"博士"}],rules:{beginDate:[{required:!0,message:"请输入起始年月",trigger:"change"}],endDate:[{required:!0,message:"请输入终止年月",trigger:"change"}],school:[{required:!0,message:"请输入学校名称",trigger:"blur"}],education:[{required:!0,message:"请选择学历",trigger:"change"}]}}},created:function(){if(this.value&&this.value.tbEducationList&&this.value.tbEducationList.length)this.educationList=this.value.tbEducationList,this.firstOpen=!1;else if(sessionStorage.educationList){for(var e=JSON.parse(sessionStorage.educationList),t=0;t<e.length;t++)e[t].beginDate=new Date(e[t].beginDate),e[t].endDate=new Date(e[t].endDate);this.educationList=e}},watch:{educationList:{handler:function(e){if(this.value&&!this.firstOpen){for(var t=0;t<e.length;t++)e[t].beginDate=e[t].beginDate?new Date(e[t].beginDate).getTime():"",e[t].endDate=e[t].endDate?new Date(e[t].endDate).getTime():"";this.value.tbEducationList=e}},deep:!0}},methods:{checkForm:function(){var e=this,t=!0;return this.educationList.forEach(function(a,o){e.$refs["education"+o][0].validate(function(i){i?(new Date(a.beginDate).getTime()>new Date(a.endDate).getTime()&&(e.$message("第"+(o+1)+"段教育经历开始时间不能大于结束时间"),t=!1),o+1==e.educationList.length&&t&&(t=!0)):t=!1})}),t},addList:function(){this.educationList.length<3?this.educationList.push({beginDate:"",endDate:"",school:"",profession:"",education:""}):this.$message("最多填写3段教育经历")},prev:function(){this.$router.push({name:"family"})},next:function(){var e=this,t=!0;this.educationList.forEach(function(a,o){e.$refs["education"+o][0].validate(function(i){i?(new Date(a.beginDate).getTime()>new Date(a.endDate).getTime()&&(e.$message("第"+(o+1)+"段教育经历开始时间不能大于结束时间"),t=!1),o+1==e.educationList.length&&t&&(sessionStorage.setItem("educationList",l()(e.educationList)),e.$router.push({name:"work"}))):t=!1})})}}},L={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-resume-education"},[a("p",{staticClass:"resume-block-title"},[e._v("教育经历（从最高学历填起）")]),e._v(" "),e._l(e.educationList,function(t,o){return a("el-form",{key:"item.key",ref:"education"+o,refInFor:!0,attrs:{"label-width":"80px","label-position":"left",rules:e.rules,model:t}},[a("div",{staticClass:"form-item-group"},[a("div",{staticClass:"item-block"},[a("el-form-item",{attrs:{label:"起始年月",prop:"beginDate"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请输入起始年月"},model:{value:t.beginDate,callback:function(a){e.$set(t,"beginDate",a)},expression:"item.beginDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"终止年月",prop:"endDate"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请输入终止年月"},model:{value:t.endDate,callback:function(a){e.$set(t,"endDate",a)},expression:"item.endDate"}})],1)],1),e._v(" "),a("div",{staticClass:"item-block"},[a("el-form-item",{attrs:{label:"学校名称",prop:"school"}},[a("el-input",{attrs:{placeholder:"请输入学校名称"},model:{value:t.school,callback:function(a){e.$set(t,"school",a)},expression:"item.school"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"专业"}},[a("el-input",{attrs:{placeholder:"请输入专业名称"},model:{value:t.profession,callback:function(a){e.$set(t,"profession",a)},expression:"item.profession"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"学历",prop:"education"}},[a("el-select",{model:{value:t.education,callback:function(a){e.$set(t,"education",a)},expression:"item.education"}},e._l(e.educationOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.label}})}))],1),e._v(" "),o>0?a("el-button",{staticClass:"del",attrs:{icon:"el-icon-remove-outline"},on:{click:function(t){e.educationList.splice(o,1)}}},[e._v("删除")]):e._e()],1)])}),e._v(" "),a("div",{staticClass:"item-block item-add"},[a("el-button",{attrs:{icon:"el-icon-plus"},on:{click:e.addList}},[e._v("新增教育经历")])],1),e._v(" "),a("div",{staticClass:"item-block btn-container"},[a("el-button-group",[a("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left"},on:{click:e.prev}},[e._v("上一步")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.next}},[e._v("下一步"),a("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1)],1)],2)},staticRenderFns:[]},F=a("OF7X")(T,L,!1,function(e){a("MIXo"),a("1U02")},null,null).exports,M={props:{value:{type:Object}},data:function(){return{firstOpen:!0,contactInfo:{familyphone:"",phone:"",email:"",birthplace:"",birthcode:"",residence:"",residencecode:"",iceperson:"",relation:"",icepersonphone:""},rules:{familyphone:[{pattern:/^0\d{2,3}-?\d{7,8}$/i,message:"输入的电话号码格式不正确",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号码",trigger:"blur"},{pattern:/^1[3|4|5|8][0-9]\d{8}$/i,message:"手机号码格式不正确",trigger:"blur"}],email:[{type:"email",message:"邮箱格式不正确",trigger:"blur"}],icepersonphone:[{required:!0,message:"请输入紧急联系人手机号",trigger:"blur"},{pattern:/(^1[3|4|5|8][0-9]\d{8}$)|(^0\d{2,3}-?\d{7,8}$)/i,message:"手机号码格式不正确",trigger:"blur"}],birthplace:[{required:!0,message:"请输入户籍地址",trigger:"blur"}],iceperson:[{required:!0,message:"请输入紧急联系姓名",trigger:"blur"}],residence:[{required:!0,message:"请输入目前住址",trigger:"blur"}],relation:[{required:!0,message:"请输入关系",trigger:"blur"}],birthcode:[{pattern:/^[1-9][0-9]{5}$/,message:"邮编格式不正确",trigger:"blur"}],residencecode:[{pattern:/^[1-9][0-9]{5}$/,message:"邮编格式不正确",trigger:"blur"}]}}},created:function(){this.value?(d()(this.contactInfo,this.value),this.firstOpen=!1):sessionStorage.contactInfo&&(this.contactInfo=JSON.parse(sessionStorage.contactInfo))},watch:{contactInfo:{handler:function(e){this.value&&!this.firstOpen&&d()(this.value,e)},deep:!0}},methods:{checkForm:function(){var e=!0;return this.$refs.contactInfo&&this.$refs.contactInfo.validate(function(t){e=t}),e},prev:function(){this.$router.push({name:"position"})},next:function(e){var t=this;this.$refs[e].validate(function(e){e&&(sessionStorage.setItem("contactInfo",l()(t.contactInfo)),t.$router.push({name:"family"}))})}}},z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-resume-contact"},[a("p",{staticClass:"resume-block-title"},[e._v("联系方式")]),e._v(" "),a("el-form",{ref:"contactInfo",attrs:{"label-width":"100px","label-position":"left",model:e.contactInfo,rules:e.rules}},[a("div",{staticClass:"item-block"},[a("el-form-item",{attrs:{label:"家庭电话",prop:"familyphone"}},[a("el-input",{attrs:{placeholder:"请输入家庭电话"},model:{value:e.contactInfo.familyphone,callback:function(t){e.$set(e.contactInfo,"familyphone",t)},expression:"contactInfo.familyphone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.contactInfo.phone,callback:function(t){e.$set(e.contactInfo,"phone",t)},expression:"contactInfo.phone"}})],1)],1),e._v(" "),a("div",{staticClass:"item-block"},[a("el-form-item",{attrs:{label:"电子邮箱",prop:"email"}},[a("el-input",{attrs:{placeholder:"请输入电子邮箱"},model:{value:e.contactInfo.email,callback:function(t){e.$set(e.contactInfo,"email",t)},expression:"contactInfo.email"}})],1)],1),e._v(" "),a("div",{staticClass:"item-block"},[a("el-form-item",{attrs:{label:"户籍地址",prop:"birthplace"}},[a("el-input",{attrs:{placeholder:"请输入户籍地址"},model:{value:e.contactInfo.birthplace,callback:function(t){e.$set(e.contactInfo,"birthplace",t)},expression:"contactInfo.birthplace"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"户籍邮编",prop:"birthcode"}},[a("el-input",{attrs:{placeholder:"请输入邮编"},model:{value:e.contactInfo.birthcode,callback:function(t){e.$set(e.contactInfo,"birthcode",t)},expression:"contactInfo.birthcode"}})],1)],1),e._v(" "),a("div",{staticClass:"item-block"},[a("el-form-item",{attrs:{label:"目前住址",prop:"residence"}},[a("el-input",{attrs:{placeholder:"请输入目前住址"},model:{value:e.contactInfo.residence,callback:function(t){e.$set(e.contactInfo,"residence",t)},expression:"contactInfo.residence"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"住址邮编",prop:"residencecode"}},[a("el-input",{attrs:{placeholder:"请输入住址邮编"},model:{value:e.contactInfo.residencecode,callback:function(t){e.$set(e.contactInfo,"residencecode",t)},expression:"contactInfo.residencecode"}})],1)],1),e._v(" "),a("div",{staticClass:"item-block col-3"},[a("el-form-item",{attrs:{label:"紧急联系人",prop:"iceperson"}},[a("el-input",{attrs:{placeholder:"请输入紧急联系姓名"},model:{value:e.contactInfo.iceperson,callback:function(t){e.$set(e.contactInfo,"iceperson",t)},expression:"contactInfo.iceperson"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"关系",prop:"relation"}},[a("el-input",{attrs:{placeholder:"请输入关系"},model:{value:e.contactInfo.relation,callback:function(t){e.$set(e.contactInfo,"relation",t)},expression:"contactInfo.relation"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号",prop:"icepersonphone"}},[a("el-input",{attrs:{placeholder:"请输入紧急联系手机号"},model:{value:e.contactInfo.icepersonphone,callback:function(t){e.$set(e.contactInfo,"icepersonphone",t)},expression:"contactInfo.icepersonphone"}})],1)],1)]),e._v(" "),a("div",{staticClass:"item-block btn-container"},[a("el-button-group",[a("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left"},on:{click:function(t){e.$router.back()}}},[e._v("上一步")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.next("contactInfo")}}},[e._v("下一步"),a("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1)],1)],1)},staticRenderFns:[]},q=a("OF7X")(M,z,!1,function(e){a("WtBP")},null,null).exports,N={props:{value:{type:Object}},data:function(){return{firstOpen:!0,tbFamilyList:[{name:"",relation:"",age:"",residence:"",company:"",post:""}],rules:{name:[{required:!0,message:"请输入成员姓名",trigger:"blur"}],relation:[{required:!0,message:"请输入与成员关系",trigger:"blur"}],age:[{required:!0,message:"请输入成员年龄",trigger:"blur"},{validator:function(e,t,a){t&&(/^[1-9]\d*$/.test(t)?a():a(new Error("请输入正整数")))},trigger:"blur"}],residence:[{required:!0,message:"请输入成员居住地址",trigger:"blur"}]}}},created:function(){this.value&&this.value.tbFamilyList&&this.value.tbFamilyList.length?(this.tbFamilyList=this.value.tbFamilyList,this.firstOpen=!1):sessionStorage.tbFamilyList&&(this.tbFamilyList=JSON.parse(sessionStorage.tbFamilyList))},watch:{tbFamilyList:{handler:function(e){this.value&&!this.firstOpen&&(this.value.tbFamilyList=e)},deep:!0}},methods:{checkForm:function(){var e=this,t=!0;return this.tbFamilyList.forEach(function(a,o){e.$refs["person"+o][0].validate(function(a){a?o+1==e.tbFamilyList.length&&t&&(t=!0):t=!1})}),t},addMembers:function(){this.tbFamilyList.length<3?this.tbFamilyList.push({name:"",relation:"",age:"",residence:"",company:"",post:""}):this.$message("最多填写3个家庭成员")},prev:function(){this.$router.push({name:"contact"})},next:function(){var e=this,t=!0;this.tbFamilyList.forEach(function(a,o){e.$refs["person"+o][0].validate(function(a){a?o+1==e.tbFamilyList.length&&t&&(sessionStorage.setItem("tbFamilyList",l()(e.tbFamilyList)),e.$router.push({name:"education"})):t=!1})})}}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-resume-family"},[a("p",{staticClass:"resume-block-title"},[e._v("家庭成员（已婚者须填写配偶、子女情况；未婚者填写父母或兄弟姐妹）")]),e._v(" "),e._l(e.tbFamilyList,function(t,o){return a("el-form",{key:"item.key",ref:"person"+o,refInFor:!0,staticClass:"demo-dynamic",attrs:{"label-width":"80px","label-position":"left",rules:e.rules,model:t}},[a("div",{staticClass:"form-item-group"},[a("div",{staticClass:"item-block"},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入成员姓名"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"关系",prop:"relation"}},[a("el-input",{attrs:{placeholder:"请输入关系"},model:{value:t.relation,callback:function(a){e.$set(t,"relation",a)},expression:"item.relation"}})],1)],1),e._v(" "),a("div",{staticClass:"item-block"},[a("el-form-item",{attrs:{label:"年龄",prop:"age"}},[a("el-input",{attrs:{placeholder:"请输入成员年龄"},model:{value:t.age,callback:function(a){e.$set(t,"age",a)},expression:"item.age"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"居住地",prop:"residence"}},[a("el-input",{attrs:{placeholder:"请输入成员居住地"},model:{value:t.residence,callback:function(a){e.$set(t,"residence",a)},expression:"item.residence"}})],1)],1),e._v(" "),a("div",{staticClass:"item-block"},[a("el-form-item",{attrs:{label:"工作单位"}},[a("el-input",{attrs:{placeholder:"请输入成员工作单位"},model:{value:t.company,callback:function(a){e.$set(t,"company",a)},expression:"item.company"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"职务"}},[a("el-input",{attrs:{placeholder:"请输入成员职务"},model:{value:t.post,callback:function(a){e.$set(t,"post",a)},expression:"item.post"}})],1)],1),e._v(" "),o>0?a("el-button",{staticClass:"del",attrs:{icon:"el-icon-remove-outline"},on:{click:function(t){e.tbFamilyList.splice(o,1)}}},[e._v("删除")]):e._e()],1)])}),e._v(" "),a("div",{staticClass:"item-block item-add"},[a("el-button",{attrs:{icon:"el-icon-plus"},on:{click:e.addMembers}},[e._v("新增家庭成员")])],1),e._v(" "),a("div",{staticClass:"item-block btn-container"},[a("el-button-group",[a("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left"},on:{click:e.prev}},[e._v("上一步")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.next("tbFamilyList")}}},[e._v("下一步"),a("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1)],1)],2)},staticRenderFns:[]},P=a("OF7X")(N,E,!1,function(e){a("zYgB"),a("xR5h")},null,null).exports,B={props:{value:{type:Object}},data:function(){return{firstOpen:!0,workList:[{beginDate:"",endDate:"",company:"",post:"",salary:"",reason:"",reterence:"",phone:""}],rules:{phone:[{pattern:/^1[3|4|5|8][0-9]\d{8}$/i,message:"手机号码格式错误",trigger:"blur"}]}}},created:function(){if(this.value&&this.value.tbCompanyList&&this.value.tbCompanyList.length&&(this.workList=this.value.tbCompanyList,this.firstOpen=!1),sessionStorage.workList){for(var e=JSON.parse(sessionStorage.workList),t=0;t<e.length;t++)e[t].beginDate=e[t].beginDate?new Date(e[t].beginDate):"",e[t].endDate=e[t].endDate?new Date(e[t].endDate):"";this.workList=e}},watch:{workList:{handler:function(e){if(this.value&&!this.firstOpen){for(var t=0;t<e.llength;t++)e[t].beginDate=e[t].beginDate?new Date(e[t].beginDate).getTime():"",e[t].endDate=e[t].endDate?new Date(e[t].endDate).getTime():"";this.value.tbCompanyList=e}},deep:!0}},methods:{checkForm:function(){var e=this,t=!0;return this.workList.forEach(function(a,o){e.$refs["work"+o][0].validate(function(i){i?(new Date(a.beginDate).getTime()>new Date(a.endDate).getTime()&&(e.$message("第"+(o+1)+"段教育经历开始时间不能大于结束时间"),t=!1),o+1==e.workList.length&&t&&(t=!0)):t=!1})}),t},addList:function(){this.workList.length<3?this.workList.push({beginDate:"",endDate:"",company:"",post:"",salary:"",reason:"",reterence:"",phone:""}):this.$message("最多填写3段工作简历")},prev:function(){this.$router.push({name:"education"})},next:function(){var e=this,t=!0;this.workList.forEach(function(a,o){e.$refs["work"+o][0].validate(function(i){i?(new Date(a.beginDate).getTime()>new Date(a.endDate).getTime()&&(e.$message("第"+(o+1)+"段教育经历开始时间不能大于结束时间"),t=!1),o+1==e.workList.length&&t&&(sessionStorage.setItem("workList",l()(e.workList)),e.$router.push({name:"technology"}))):t=!1})})}}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-resume-work"},[a("p",{staticClass:"resume-block-title"},[e._v("工作经历（最近的3家）")]),e._v(" "),e._l(e.workList,function(t,o){return a("el-form",{key:o,ref:"work"+o,refInFor:!0,attrs:{"label-width":"85px","label-position":"left",model:t,rules:e.rules}},[a("div",{staticClass:"form-item-group"},[a("div",{staticClass:"item-block"},[a("el-form-item",{attrs:{label:"起始时间",prop:"beginDate"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请输入起始时间"},model:{value:t.beginDate,callback:function(a){e.$set(t,"beginDate",a)},expression:"item.beginDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"终止时间",prop:"endDate"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请输入终止时间"},model:{value:t.endDate,callback:function(a){e.$set(t,"endDate",a)},expression:"item.endDate"}})],1)],1),e._v(" "),a("div",{staticClass:"item-block"},[a("el-form-item",{attrs:{label:"工作单位",prop:"company"}},[a("el-input",{attrs:{placeholder:"请输入工作单位"},model:{value:t.company,callback:function(a){e.$set(t,"company",a)},expression:"item.company"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"职位",prop:"post"}},[a("el-input",{attrs:{placeholder:"请输入职位"},model:{value:t.post,callback:function(a){e.$set(t,"post",a)},expression:"item.post"}})],1)],1),e._v(" "),a("div",{staticClass:"item-block",attrs:{prop:"salary"}},[a("el-form-item",{attrs:{label:"薪资"}},[a("el-input",{attrs:{placeholder:"请输入薪资(元)"},model:{value:t.salary,callback:function(a){e.$set(t,"salary",a)},expression:"item.salary"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"离职原因",prop:"reason"}},[a("el-input",{attrs:{placeholder:"请输入离职原因"},model:{value:t.reason,callback:function(a){e.$set(t,"reason",a)},expression:"item.reason"}})],1)],1),e._v(" "),a("div",{staticClass:"item-block"},[a("el-form-item",{attrs:{label:"证明人",prop:"reterence"}},[a("el-input",{attrs:{placeholder:"请输入证明人"},model:{value:t.reterence,callback:function(a){e.$set(t,"reterence",a)},expression:"item.reterence"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"证明人手机",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入证明人手机"},model:{value:t.phone,callback:function(a){e.$set(t,"phone",a)},expression:"item.phone"}})],1)],1),e._v(" "),o>0?a("el-button",{staticClass:"del",attrs:{icon:"el-icon-remove-outline"},on:{click:function(t){e.workList.splice(o,1)}}},[e._v("删除")]):e._e()],1)])}),e._v(" "),a("div",{staticClass:"item-block item-add"},[a("el-button",{attrs:{icon:"el-icon-plus"},on:{click:e.addList}},[e._v("新增工作经历")])],1),e._v(" "),a("div",{staticClass:"item-block btn-container"},[a("el-button-group",[a("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left"},on:{click:e.prev}},[e._v("上一步")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.next}},[e._v("下一步"),a("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1)],1)],2)},staticRenderFns:[]},R=a("OF7X")(B,A,!1,function(e){a("0ub9")},null,null).exports,Y={props:{value:{type:Object}},data:function(){return{firstOpen:!0,positionInfo:{licensetype:"",licenselocation:"",licensevaliddate:"",drivingex:"",cartype:[],isworklicense:"有",worklicensevaliddate:""},options:[{value:"A1",label:"A1"},{value:"A2",label:"A2"},{value:"A3",label:"A3"},{value:"B1",label:"B1"},{value:"B2",label:"B2"},{value:"C1",label:"C1"},{value:"C2",label:"C2"},{value:"C3",label:"C3"},{value:"C4",label:"C4"},{value:"D",label:"D"},{value:"E",label:"E"},{value:"F",label:"F"},{value:"M",label:"M"},{value:"N",label:"N"},{value:"P",label:"P"}],rules:{licensetype:[{required:!0,message:"请选择驾照类型",trigger:"change"}],licenselocation:[{required:!0,message:"请输入领证地址",trigger:"blur"}],licensevaliddate:[{required:!0,message:"请选择驾照到期时间",trigger:"change"}],drivingex:[{required:!0,message:"请输入实际驾龄",trigger:"blur",type:"number"},{pattern:/^[1-9]\d*$/,message:"请输入正整数",trigger:"blur"}],cartype:[{required:!0,message:"请选择驾驶过的车辆类型",trigger:"change",type:"array"}],worklicensevaliddate:[{required:!0,message:"请选择货运上岗证到期时间",trigger:"change"}]}}},created:function(){if(this.value)d()(this.positionInfo,this.value),this.value.cartype&&(this.positionInfo.cartype=this.value.cartype.split(",")),this.value.drivingex&&(this.positionInfo.drivingex=parseInt(this.positionInfo.drivingex)),this.firstOpen=!1;else if(sessionStorage.positionInfo){var e=JSON.parse(sessionStorage.positionInfo);e.licensevaliddate=new Date(e.licensevaliddate),e.worklicensevaliddate=new Date(e.worklicensevaliddate),this.positionInfo=e}},watch:{"positionInfo.isworklicense":function(e){"有"==e?this.rules.worklicensevaliddate=[{required:!0,message:"请选择货运上岗证到期时间",trigger:"change"}]:(this.rules.worklicensevaliddate=[{required:!1}],this.$refs.positionInfo.validateField("worklicensevaliddate"),this.positionInfo.worklicensevaliddate="")},positionInfo:{handler:function(e){this.value&&!this.firstOpen&&(d()(this.value,e),this.value.cartype=e.cartype.join(","),this.value.licensevaliddate=this.value.licensevaliddate?new Date(this.value.licensevaliddate).getTime():"",this.value.worklicensevaliddate=this.value.worklicensevaliddate?new Date(this.value.worklicensevaliddate).getTime():"")},deep:!0}},methods:{checkForm:function(){var e=!0;return this.$refs.positionInfo&&this.$refs.positionInfo.validate(function(t){e=t}),e},prev:function(){this.$router.push({name:"base-info"})},next:function(e){var t=this;this.positionInfo,this.$refs[e].validate(function(e){e&&(sessionStorage.setItem("positionInfo",l()(t.positionInfo)),t.$router.push({name:"contact"}))})}}},U={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-resume-position"},[a("p",{staticClass:"resume-block-title"},[e._v("职业信息专栏（仅限营销司机应聘人员填写）")]),e._v(" "),a("el-form",{ref:"positionInfo",attrs:{"label-width":"120px","label-position":"left",model:e.positionInfo,rules:e.rules}},[a("div",{staticClass:"item-block"},[a("el-form-item",{attrs:{label:"驾照类型","label-width":"80px",prop:"licensetype"}},[a("el-select",{attrs:{placeholder:"请选择驾照类型"},model:{value:e.positionInfo.licensetype,callback:function(t){e.$set(e.positionInfo,"licensetype",t)},expression:"positionInfo.licensetype"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"领证地点","label-width":"80px",prop:"licenselocation"}},[a("el-input",{attrs:{placeholder:"请输入领证地点"},model:{value:e.positionInfo.licenselocation,callback:function(t){e.$set(e.positionInfo,"licenselocation",t)},expression:"positionInfo.licenselocation"}})],1)],1),e._v(" "),a("div",{staticClass:"item-block"},[a("el-form-item",{attrs:{label:"有效日期","label-width":"80px",prop:"licensevaliddate"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请选择到期时间"},model:{value:e.positionInfo.licensevaliddate,callback:function(t){e.$set(e.positionInfo,"licensevaliddate",t)},expression:"positionInfo.licensevaliddate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"实际驾龄","label-width":"80px",prop:"drivingex"}},[a("el-input",{attrs:{placeholder:"请输入实际驾龄"},model:{value:e.positionInfo.drivingex,callback:function(t){e.$set(e.positionInfo,"drivingex",e._n(t))},expression:"positionInfo.drivingex"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"驾驶过的车辆类型","label-width":"160px",prop:"cartype"}},[a("el-checkbox-group",{model:{value:e.positionInfo.cartype,callback:function(t){e.$set(e.positionInfo,"cartype",t)},expression:"positionInfo.cartype"}},[a("el-checkbox",{attrs:{label:"1.5吨以上货车"}}),e._v(" "),a("el-checkbox",{attrs:{label:"其他"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"有无货运上岗证","label-width":"160px",prop:"isworklicense",required:""}},[a("el-radio-group",{model:{value:e.positionInfo.isworklicense,callback:function(t){e.$set(e.positionInfo,"isworklicense",t)},expression:"positionInfo.isworklicense"}},[a("el-radio",{attrs:{label:"有"}}),e._v(" "),a("el-radio",{attrs:{label:"无"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"货运上岗证有效日期至","label-width":"180px",prop:"worklicensevaliddate"}},[a("el-date-picker",{attrs:{disabled:"无"==e.positionInfo.isworklicense,type:"date",placeholder:"请输入到期时间"},model:{value:e.positionInfo.worklicensevaliddate,callback:function(t){e.$set(e.positionInfo,"worklicensevaliddate",t)},expression:"positionInfo.worklicensevaliddate"}})],1)],1),e._v(" "),a("div",{staticClass:"item-block btn-container"},[a("el-button-group",[a("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left"},on:{click:e.prev}},[e._v("上一步")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.next("positionInfo")}}},[e._v("\n        下一步\n        "),a("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1)],1)],1)},staticRenderFns:[]},H=a("OF7X")(Y,U,!1,function(e){a("o01P")},null,null).exports,J={props:{value:{type:Object}},data:function(){return{firstOpen:!0,skill:{iscomputer:"",proskill:"",otherskill:"",interest:""},textareaSize:{minRows:5,maxRows:8}}},created:function(){this.value?(d()(this.skill,this.value),this.firstOpen=!1):sessionStorage.skill&&(this.skill=JSON.parse(sessionStorage.skill))},watch:{skill:{handler:function(e){this.value&&!this.firstOpen&&d()(this.value,e)},deep:!0}},methods:{checkForm:function(){var e=!0;return this.$refs.skill.validate(function(t){e=t}),e},prev:function(){this.$router.push({name:"work"})},next:function(e){var t=this;this.$refs[e].validate(function(e){e&&(sessionStorage.setItem("skill",l()(t.skill)),t.$router.push({name:"shengao"}))})}}},K={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-resume-technology"},[a("p",{staticClass:"resume-block-title"},[e._v("技能及个人特长")]),e._v(" "),a("el-form",{ref:"skill",attrs:{model:e.skill,"babel-position":"top"}},[a("el-form-item",{attrs:{label:"您会使用何种电脑软件?（例如：EXCEL,WORD,PPT等）",prop:"iscomputer"}},[a("el-input",{attrs:{type:"textarea",placeholder:"如有其他请填写"},model:{value:e.skill.iscomputer,callback:function(t){e.$set(e.skill,"iscomputer",t)},expression:"skill.iscomputer"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"曾经参加过何种专业技能培训 ?",prop:"proskill"}},[a("el-input",{attrs:{autosize:e.textareaSize,type:"textarea",placeholder:"请输入"},model:{value:e.skill.proskill,callback:function(t){e.$set(e.skill,"proskill",t)},expression:"skill.proskill"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"外语水平 / 其他技能",prop:"otherskill"}},[a("el-input",{attrs:{autosize:e.textareaSize,type:"textarea",placeholder:"请输入"},model:{value:e.skill.otherskill,callback:function(t){e.$set(e.skill,"otherskill",t)},expression:"skill.otherskill"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"个人兴趣爱好、特长",prop:"interest"}},[a("el-input",{attrs:{autosize:e.textareaSize,type:"textarea",placeholder:"请输入兴趣爱好"},model:{value:e.skill.interest,callback:function(t){e.$set(e.skill,"interest",t)},expression:"skill.interest"}})],1)],1),e._v(" "),a("div",{staticClass:"item-block btn-container"},[a("el-button-group",[a("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left"},on:{click:e.prev}},[e._v("上一步")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.next("skill")}}},[e._v("下一步"),a("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1)],1)],1)},staticRenderFns:[]},W=a("OF7X")(J,K,!1,function(e){a("rf53")},null,null).exports,X={props:{value:{type:Object}},data:function(){return{firstOpen:!0,loading:!1,state:{ispeccancy:"",beillegal:"",retire:"",friends:"",tranlocation:"同意",reason1:"",tranpost:"同意",reason2:"",tranlocation1year:"同意",reason3:""},textareaSize:{minRows:5,maxRows:8},detail:{}}},created:function(){this.value?(d()(this.state,this.value),this.firstOpen=!1):sessionStorage.stateInfo&&(this.state=JSON.parse(sessionStorage.stateInfo))},watch:{state:{handler:function(e){this.value&&!this.firstOpen&&d()(this.value,e)},deep:!0}},methods:{checkForm:function(){var e=!0;return this.$refs.state.validate(function(t){e=t}),e},formateTime:function(e){return(e=new Date(e)).getTime()},prev:function(){this.$router.push({name:"technology"})},submit:function(e,t){var a=this;this.$refs[e].validate(function(e){if(e)if(sessionStorage.setItem("stateInfo",l()(a.state)),sessionStorage.baseInfo&&sessionStorage.contactInfo&&sessionStorage.educationList&&sessionStorage.tbFamilyList&&sessionStorage.skill&&sessionStorage.workList){var o=JSON.parse(sessionStorage.baseInfo),i=JSON.parse(sessionStorage.contactInfo),r=JSON.parse(sessionStorage.educationList),s=JSON.parse(sessionStorage.tbFamilyList),n=sessionStorage.positionInfo?JSON.parse(sessionStorage.positionInfo):"",c=JSON.parse(sessionStorage.skill),d=JSON.parse(sessionStorage.workList);if(1==o.post&&!sessionStorage.positionInfo)return void a.$message("请完善您的职业信息后再提交");sessionStorage.positionInfo&&(n.licensevaliddate=n.licensevaliddate?a.formateTime(n.licensevaliddate):"",n.worklicensevaliddate=n.worklicensevaliddate?a.formateTime(n.worklicensevaliddate):"");var f=[],p=[];o.date_of_birth=a.formateTime(o.date_of_birth);for(var m=0;m<r.length;m++){var u={};u.beginDate=a.formateTime(r[m].beginDate),u.endDate=a.formateTime(r[m].endDate),u.school=r[m].school,u.profession=r[m].profession,u.education=r[m].education,p.push(u)}for(var h=0;h<d.length;h++){var b={};b.beginDate=d[h].beginDate?a.formateTime(d[h].beginDate):"",b.endDate=d[h].endDate?a.formateTime(d[h].endDate):"",b.company=d[h].company,b.post=d[h].post,b.salary=d[h].salary,b.reason=d[h].reason,b.reterence=d[h].reterence,b.phone=d[h].phone,f.push(b)}a.detail={status:1,post:o.post,applicationArea:o.applicationArea,exp_salary:o.exp_salary,workDate:o.workDate,channel:o.channel.join(","),name:o.name,sex:o.sex,documentType:o.documentType,num:o.num,date_of_birth:o.date_of_birth,height:Number(o.height),weight:Number(o.weight),nativeStr:o.nativeStr,politics:o.politics,marriage:o.marriage,escuage:o.escuage,licensetype:n.licensetype,licenselocation:n.licenselocation,licensevaliddate:n.licensevaliddate,drivingex:n.drivingex,cartype:n.cartype?n.cartype.join(","):"",isworklicense:n.isworklicense,worklicensevaliddate:n.worklicensevaliddate,tbFamilyList:s,tbEducationList:p,tbCompanyList:f,familyphone:i.familyphone,phone:i.phone,email:i.email,birthplace:i.birthplace,birthcode:i.birthcode,residence:i.residence,residencecode:i.residencecode,iceperson:i.iceperson,relation:i.relation,icepersonphone:i.icepersonphone,iscomputer:c.iscomputer,proskill:c.proskill,otherskill:c.otherskill,interest:c.interest,ispeccancy:a.state.ispeccancy,beillegal:a.state.beillegal,retire:a.state.retire,tranlocation:a.state.tranlocation,reason1:a.state.reason1,tranpost:a.state.tranpost,reason2:a.state.reason2,tranlocation1year:a.state.tranlocation1year,reason3:a.state.reason3,deleted:1}}else{var v="请完善您的";sessionStorage.baseInfo?sessionStorage.contactInfo?sessionStorage.tbFamilyList?sessionStorage.educationList||(v+=",教育经历"):v+=",家庭成员":v+=",联系方式":v+="基本信息",v+="信息后再提交",a.$message(v),t.stopPropagation()}else t.stopPropagation()})},save:function(){var e=this;this.loading=!0,this.$http.post("/candidate/addCandidate",l()(this.detail)).then(function(t){e.loading=!1,"S000"==t.data.returnCode&&(sessionStorage.removeItem("baseInfo"),sessionStorage.removeItem("contactInfo"),sessionStorage.removeItem("educationList"),sessionStorage.removeItem("tbFamilyList"),sessionStorage.removeItem("positionInfo"),sessionStorage.removeItem("skill"),sessionStorage.removeItem("workList"),sessionStorage.removeItem("stateInfo"),e.$refs.detail.showLayer=!1,e.$alert('<div class="text-center"><p style="font-size:18px;margin-bottom:20px;color:#333"><i class="el-icon-success" style="color:#0aad8a;font-size:28px;vertical-align: middle;"></i> 恭喜您，简历提交成功</p>简历提交成功后，请联系我们的HR继续进行下一步面试。</div>',"",{dangerouslyUseHTMLString:!0,showClose:!1,center:!0}).then(function(){e.$router.replace({name:"base-info"})}))}).catch(function(t){e.loading=!1})}}},G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-resume-shengao"},[a("p",{staticClass:"resume-block-title"},[e._v("申告事项")]),e._v(" "),a("el-form",{ref:"state",attrs:{model:e.state,"babel-position":"top"}},[a("el-form-item",{attrs:{label:"您是否在两年内有发生过交通违章？若有，请详细列出",prop:"ispeccancy",rules:[{required:!0,message:"请输入内容"}]}},[a("el-input",{attrs:{autosize:e.textareaSize,type:"textarea",placeholder:"请输入"},model:{value:e.state.ispeccancy,callback:function(t){e.$set(e.state,"ispeccancy",t)},expression:"state.ispeccancy"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"您是否因违法行为而被拘捕、民事或刑事诉讼过？若有，请详细列出",prop:"beillegal",rules:[{required:!0,message:"请输入内容"}]}},[a("el-input",{attrs:{autosize:e.textareaSize,type:"textarea",placeholder:"请输入"},model:{value:e.state.beillegal,callback:function(t){e.$set(e.state,"beillegal",t)},expression:"state.beillegal"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"您是否被公司解除劳动合同或和公司协商解除劳动合同过？若有，请详细列出",prop:"retire"}},[a("el-input",{attrs:{autosize:e.textareaSize,type:"textarea",placeholder:"请输入"},model:{value:e.state.retire,callback:function(t){e.$set(e.state,"retire",t)},expression:"state.retire"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"您是否有亲属朋友在雅玛多关联公司工作？若有，请列出姓名，部门名称及职位",prop:"friends"}},[a("el-input",{attrs:{autosize:e.textareaSize,type:"textarea",placeholder:"请输入"},model:{value:e.state.friends,callback:function(t){e.$set(e.state,"friends",t)},expression:"state.friends"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"您是否同意公司对您进行工作地点的调动?",prop:"tranlocation","inline-message":!0,rules:[{required:!0,message:"请选择是否同意",trigger:"change"}]}},[a("el-radio-group",{model:{value:e.state.tranlocation,callback:function(t){e.$set(e.state,"tranlocation",t)},expression:"state.tranlocation"}},[a("el-radio",{attrs:{label:"同意"}}),e._v(" "),a("el-radio",{attrs:{label:"不同意"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"reason1"}},[a("el-input",{attrs:{autosize:e.textareaSize,type:"textarea",placeholder:"可补充说明"},model:{value:e.state.reason1,callback:function(t){e.$set(e.state,"reason1",t)},expression:"state.reason1"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"您是否同意接受公司为您安排的其它岗位？",prop:"tranpost","inline-message":!0,rules:[{required:!0,message:"请选择是否同意",trigger:"change"}]}},[a("el-radio-group",{model:{value:e.state.tranpost,callback:function(t){e.$set(e.state,"tranpost",t)},expression:"state.tranpost"}},[a("el-radio",{attrs:{label:"同意"}}),e._v(" "),a("el-radio",{attrs:{label:"不同意"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"reason2"}},[a("el-input",{attrs:{autosize:e.textareaSize,type:"textarea",placeholder:"可补充说明"},model:{value:e.state.reason2,callback:function(t){e.$set(e.state,"reason2",t)},expression:"state.reason2"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"您是否同意接受不超过一年的外派工作?",prop:"tranlocation1year","inline-message":!0,rules:[{required:!0,message:"请选择是否同意",trigger:"change"}]}},[a("el-radio-group",{model:{value:e.state.tranlocation1year,callback:function(t){e.$set(e.state,"tranlocation1year",t)},expression:"state.tranlocation1year"}},[a("el-radio",{attrs:{label:"同意"}}),e._v(" "),a("el-radio",{attrs:{label:"不同意"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"reason3"}},[a("el-input",{attrs:{autosize:e.textareaSize,type:"textarea",placeholder:"可补充说明"},model:{value:e.state.reason3,callback:function(t){e.$set(e.state,"reason3",t)},expression:"state.reason3"}})],1)],1),e._v(" "),a("div",{staticClass:"item-block btn-container"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left"},on:{click:e.prev}},[e._v("上一步")]),e._v(" "),a("template",{slot:"button"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit("state",t)}}},[e._v("创建简历")])],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],2)],1)},staticRenderFns:[]},V={components:{hrDept:_,hrPosition:I,contract:O,carInfo:H,contactInfo:q,familyInfo:P,educationInfo:F,workInfo:R,skillInfo:W,complaintInfo:a("OF7X")(X,G,!1,function(e){a("KdmY"),a("qQym")},null,null).exports},props:{fromResume:{type:Boolean,default:!1},type:{type:String,default:"primary"},info:{},text:{type:String,default:"新建"},add:{type:Boolean,default:!0},code:{},id:{}},data:function(){var e=this;return{tabList:[{label:"个人信息",show:!0},{label:"薪酬信息",show:!0},{label:"合同信息",show:!0},{label:"职业信息",show:!0},{label:"联系方式",show:!0},{label:"家庭成员",show:!0},{label:"教育经历",show:!0},{label:"工作经历",show:!0},{label:"技能特长",show:!0},{label:"申告事项",show:!0}],resumeId:null,hasContract:!0,checkDiscount:function(e,t,a){t&&(parseFloat(t)<0||parseFloat(t)>1)&&a(new Error("折扣输入不正确")),a()},canCreateSalary:!0,formalDatePickerOptions:{},open:!1,saveLoading:!1,loadingText:"",activeInd:0,resurmeInfo:{},form:{info:{name:"",code:"",mobile:"",idNum:"",sex:1,dateOfBirth:"",address:"",nowAddress:"",discount:"1.0",deptId:"",email:"",jobId:"",bankCardNo:"",jobOrgId:"",workSystemId:"",jobState:1,entryDate:"",probitionPeriod:"",formalDate:"",quitDate:"",laborDispatch:"Y",workMonths:"",maritalStatus:"",fertilityStatus:"",requireSettlement:"Y",requireAttendance:"Y",salaryId:"",perfId:"",wageForSeniorityAdd:"",otherAllowance:"",trafficAllowance:"",foodAllowance:"",tradeUnions:"Y",tradeUnionsFee:5,jobType:"",salary:"",perf:""},salary:{amount:"",socialSecurityNo:"",housingFundNo:"",status:"",householdCode:"",paymentUnit:"",cityCode:"",accinfoId:"",accinfoName:"",jobTypeId:"",jobGradeId:"",jobTypeName:"",jobGradeName:""},baseInfo:{nativeStr:"",height:"",weight:"",politics:"",marriage:1,escuage:"否"}},sels:{jobOrgs:[],workTypes:[],salary:"",perf:"",carMoneys:[],foodMoneys:[],vipMoneys:[],householdList:[],paymentUnitList:[],cityList:[]},rules:{"info.name":[{required:!0,message:"员工姓名不能为空",trigger:"blur"}],"info.code":[{required:!0,message:"职员代码不能为空",trigger:"blur"}],"info.mobile":[{required:!0,message:"员工手机号不能为空",trigger:"blur"},{validator:function(e,t,a){t&&11!=t.length&&a(new Error("输入11位手机号")),a()},trigger:"blur"}],"info.deptId":[{required:!0,message:"员工部门不能为空"}],"info.jobId":[{required:!0,message:"员工职位不能为空"}],"info.jobOrgId":[{required:!0,message:"员工岗位不能为空"}],"info.workSystemId":[{required:!0,message:"编制不能为空"}],"info.workMonths":[{pattern:/^\d+(\.\d+)?$/,message:"格式不正确",trigger:"blur"}],"info.idNum":[{required:!0,message:"身份证号不能为空"},{pattern:/(^\d{15}$)|(^\d{17}(\d|x)$)/i,message:"身份证号格式不正确",trigger:"blur"}],"info.dateOfBirth":[{required:!0,message:"生日不能为空"}],"info.entryDate":[{required:!0,message:"入职时间不能为空"},{validator:function(t,a,o){a&&e.form.info.formalDate&&v()(a).format("x")>v()(e.form.info.formalDate).format("x")&&o(new Error("转正日期不能小于入职日期")),o()},trigger:"change"}],"info.formalDate":[{required:!0,message:"转正时间不能为空"},{validator:function(t,a,o){a&&e.form.info.entryDate&&v()(a).format("x")<v()(e.form.info.entryDate).format("x")&&o(new Error("转正日期不能小于入职日期")),o()},trigger:"change"}],"info.quitDate":[{required:!1,message:"转正时间不能为空"}],"info.email":[{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],"info.probitionPeriod":[{required:!0,message:"试用期不能为空",trigger:"blur"},{pattern:/^\d+$|^\d+(\.\d{1}$)/,message:"试用期填写格式不正确",trigger:"blur"}],"info.bankCardNo":[{pattern:/^\d{16}|^\d{19}$/,message:"银行卡格式不正确",trigger:"blur"}],"info.wageForSeniorityAdd":[{pattern:/^\d+(\.\d{1,2})?$/,message:"格式不正确",trigger:"blur"}],"info.otherAllowance":[{pattern:/^\d+(\.\d{1,2})?$/,message:"格式不正确",trigger:"blur"}],"salary.amount":[{pattern:/^\d+(\.\d{1,2})?$/,message:"请输入正确金额",trigger:"blur"}]},api:{getJob:m+"/api/jobOrg/getORGlistByDeptAndJob",workSystemApi:m+"/api/job/getWorkSystem",getLaborDispath:m+"/api/employee/getDDByParentCode?parentCode=",getWorkSystem:m+"/api/employee/getWorkSystemByORG",getSalaryPerf:m+"/api/employee/getSalaryPerf",saveEmployee:m+"/api/employee/add",getInfo:m+"/api/employee/getInfo?id=",upDate:m+"/api/employee/update",paymentUnitList:m+"/api/employee/getSecurityPaymentUnitList",cityList:m+"/api/employee/getSecurityCityList",houseHoldList:m+"/api/employee/getSecurityHouseholdList",getAccinfoId:m+"/api/employee/getSecurityAccinfo",addSalary:m+"/api/employee/insertInsure",updateSalary:m+"/api/employee/updateInsure",getSalaryInfo:m+"/api/employee/getInsure",getJobInfo:m+"/api/job/getJobGradeAndType",getPermission:p+"/api/pmsn/selfPermissions"},isFirstChangeJob:!0,isFirstChangeJobOrgId:!0,politicsOptions:[{label:"团员"},{label:"党员"},{label:"群众"}],checkMarriedList:[{label:"未婚",value:1},{label:"已婚未育",value:2},{label:"已婚已育",value:3}],soldierList:[{label:"是"},{label:"否"}]}},computed:{emoloyeeCode:function(){return this.code},emoloyeeId:function(){return this.id}},mounted:function(){var e=this;this.getWorkSystems(),this.getLaborDispath("carMoneys","SALARY_LABOR_DISPATCH_TRAFFIC"),this.getLaborDispath("foodMoneys","SALARY_LABOR_DISPATCH_FOOD"),this.getLaborDispath("vipMoneys","TRADE_UNIONS_FEE");var t=this;if(this.$http.get(t.api.getPermission).then(function(e){var a=e.data;"200"==a.code&&(t.canCreateSalary=a.data.indexOf("SALARY")>=0,t.tabList[1].show=t.canCreateSalary)}),this.$http.get(t.api.houseHoldList).then(function(e){var a=e.data;"200"==a.code&&(t.sels.householdList=a.data)}),this.$http.get(t.api.cityList).then(function(e){"200"==e.code&&(t.sels.cityList=e.data)}),this.$http.get(t.api.paymentUnitList).then(function(e){"200"==e.code&&(t.sels.paymentUnitList=e.data)}),this.info){this.resurmeInfo=this.info,d()(this.form.baseInfo,this.resurmeInfo),this.form.baseInfo.marriage=this.resurmeInfo.marriage?parseInt(this.resurmeInfo.marriage):1,this.form.baseInfo.escuage=this.resurmeInfo.escuage||"否",this.info.sex=parseInt(this.info.sex);var a={name:this.info.name,mobile:this.info.phone,idNum:this.info.num,sex:this.info.sex,dateOfBirth:this.info.date_of_birth,email:this.info.email,jobOrgId:this.info.post};this.resumeId=this.info.id,a.dateOfBirth=v()(a.dateOfBirth).format("YYYY-MM-DD"),d()(this.form.info,a),this.$http.get("/api/recruitPlan/otherInfo",{params:{id:a.jobOrgId}}).then(function(t){e.form.info.deptId=t.data.data.deptId,e.$nextTick(function(){var e=this;this.form.info.jobId=t.data.data.jobId,this.$nextTick(function(){e.form.info.jobOrgId=t.data.data.jobOrgId,e.$nextTick(function(){e.form.info.workSystemId=t.data.data.workSystemId})})})})}},watch:{"form.baseInfo":{handler:function(e){d()(this.resurmeInfo,e)},deep:!0},activeInd:function(e){e?(this.rules["info.salaryId"]=[{required:!0,message:"工资档位不能为空"}],this.rules["info.discount"]=[{required:!0,message:"试用期折扣不能为空",trigger:"change"},{validator:this.checkDiscount,trigger:"blur"}]):(this.rules["info.salaryId"]=[],this.rules["info.discount"]=[])},"form.info.tradeUnions":function(e){this.add&&(this.form.info.tradeUnionsFee="Y"==e?5:0)},"form.info.jobType":function(e){this.add&&("1"==e?(this.form.info.trafficAllowance=10,this.form.info.foodAllowance=20):"2"==e&&(this.form.info.trafficAllowance=5,this.form.info.foodAllowance=15))},"form.info.deptId":function(e){this.$refs.aadForm&&this.$refs.aadForm.validateField("info.deptId")},"form.info.jobId":function(e){e?this.getJobInfo():(this.form.info.jobTypeId="",this.form.info.jobTypeName="",this.form.info.jobGradeId="",this.form.info.jobGradeName=""),this.form.info.salaryId&&e&&this.getSalaryPerf("salary",this.form.info.salaryId),this.form.info.perfId&&e&&this.getSalaryPerf("perf",this.form.info.perfId),this.getJobOrgs(),this.form.info.jobOrgId="",this.$nextTick(function(){this.$refs.aadForm&&this.$refs.aadForm.validateField("info.jobId")})},"form.info.jobOrgId":function(){this.add&&(this.getDefaultWorkSystem(),this.form.info.workSystemId="")},"form.info.salaryId":function(e,t){e?this.form.info.jobId?this.getSalaryPerf("salary",e):this.open&&this.$message.info("确定职位后才能显示档位金额"):this.form.info.salary=0==e?0:""},"form.info.perfId":function(e){e?this.form.info.jobId?this.getSalaryPerf("perf",e):this.open&&this.$message.info("确定职位后才能显示档位金额"):this.form.info.perf=0==e?0:""},"form.info.probitionPeriod":function(e){this.form.info.entryDate&&this.add&&(this.form.info.formalDate=this.setMonth(this.form.info.entryDate,e),this.$nextTick(function(){this.$refs.aadForm&&this.$refs.aadForm.validateField("info.formalDate")}))},"form.info.entryDate":function(e){this.form.info.probitionPeriod&&this.add&&(this.form.info.formalDate=this.setMonth(e,this.form.info.probitionPeriod),this.$nextTick(function(){this.$refs.aadForm&&this.$refs.aadForm.validateField("info.formalDate")})),this.add||this.getProbitionPeriod(e,this.form.info.formalDate),e?this.formalDatePickerOptions.disabledDate=function(t){return t.getTime()<v()(e).add(1,"d").format("x")-864e5}:this.formalDatePickerOptions={}},"form.info.formalDate":function(e){this.add||this.getProbitionPeriod(this.form.info.entryDate,e)},"form.info.jobState":function(e){3==e?(this.rules["info.quitDate"]=[{required:!0,message:"离职时间不能为空"}],this.$nextTick(function(){this.$refs.aadForm&&this.$refs.aadForm.validateField("info.quitDate")})):(this.rules["info.quitDate"]=[{required:!1,message:"离职时间不能为空"}],this.$nextTick(function(){this.$refs.aadForm&&this.$refs.aadForm.validateField("info.quitDate")}),this.form.info.quitDate="")},"form.salary.householdCode":function(){this.getAccinfoId()},"form.salary.paymentUnit":function(){this.getAccinfoId()},"form.salary.cityCode":function(){this.getAccinfoId()}},methods:{changeObjNull:function(e){for(var t in e)null==e[t]&&(e[t]="");return e},setMonth:function(e,t){if(t){t=parseInt(t);var a=new Date(e),o=a.getFullYear(),i=a.getMonth(),r=parseInt(Math.floor(t/24)),s=parseInt(t%24);a.setFullYear(o+r),a.setMonth(i+s)}else a="";return a},getDateById:function(){if(this.add)this.open=!0;else{var e=this;e.saveLoading=!0,e.$http.get(e.api.getInfo+e.id).then(function(t){var a=t.data;if(200==a.code){var o=e.changeObjNull(a.data),i=JSON.parse(l()(o));o.entryDate=o.entryDate?v()(o.entryDate).format("YYYY-MM-DD"):"",o.formalDate=o.formalDate?v()(o.formalDate).format("YYYY-MM-DD"):"",o.dateOfBirth=o.dateOfBirth?v()(o.dateOfBirth).format("YYYY-MM-DD"):"",o.quitDate=o.quitDate?v()(o.quitDate).format("YYYY-MM-DD"):"",o.discount=o.discount?parseFloat(o.discount).toFixed(1):1,e.form.info={},e.form.info=o,e.$nextTick(function(){e.idCardBlur(),e.getProbitionPeriod(e.form.info.entryDate,e.form.info.formalDate),e.form.info.deptId||(e.form.info.deptId=i.deptId),e.$nextTick(function(){e.form.info.jobId||(e.form.info.jobId=i.jobId),e.$nextTick(function(){e.form.info.jobOrgId||(e.form.info.jobOrgId=i.jobOrgId),e.$nextTick(function(){e.form.info.workSystemId||(e.form.info.workSystemId=i.workSystemId)})})})}),e.getSalaryByCode()}e.saveLoading=!1})}},getSalaryByCode:function(){var e=this;this.$http.get(e.api.getSalaryInfo,{params:{employeeCode:e.emoloyeeCode}}).then(function(t){var a=t.data;e.saveLoading=!1,"200"==a.code&&(a&&a.data?e.form.salary=e.changeObjNull(a.data):e.form.salary={amount:"",socialSecurityNo:"",housingFundNo:"",status:"",householdCode:"",paymentUnit:"",cityCode:"",accinfoId:"",accinfoName:"",jobTypeId:"",jobGradeId:"",jobTypeName:"",jobGradeName:""},e.open=!0),e.getResumeByCode()})},getResumeByCode:function(){var e=this;this.$http.get("/candidate/query",{params:{employeecode:e.emoloyeeCode}}).then(function(t){"S000"==t.data.returnCode&&(t.data.data=JSON.parse(t.data.data),console.log(t),t.data.data.length?d()(e.resurmeInfo,t.data.data[0]):e.resurmeInfo={},e.open=!0)})},resert:function(e){this.$refs[e]&&(this.$refs[e].resetFields(),this.form.info.salary="",this.form.info.perf="",this.form.salary.accinfoId="",this.activeInd=0,this.isFirstChangeJob=!0,this.isFirstChangeJobOrgId=!0,this.loadingText="",this.open=!1)},save:function(e){var t=this;if(this.$refs.carInfo){if(!this.$refs.carInfo.checkForm())return!1}if(this.$refs.contactInfo){if(!this.$refs.contactInfo.checkForm())return!1}if(this.$refs.familyInfo){if(!this.$refs.familyInfo.checkForm())return!1}if(this.$refs.educationInfo){if(!this.$refs.educationInfo.checkForm())return!1}if(this.$refs.complaintInfo){if(!this.$refs.complaintInfo.checkForm())return!1}t.$refs[e].validate(function(e){if(e){var a=JSON.parse(l()(t.form.info));a.entryDate=v()(t.form.info.entryDate).format("YYYY-MM-DD HH:mm:ss"),a.formalDate=v()(t.form.info.formalDate).format("YYYY-MM-DD HH:mm:ss"),a.dateOfBirth=v()(t.form.info.dateOfBirth).format("YYYY-MM-DD HH:mm:ss"),a.quitDate?a.quitDate=v()(t.form.info.quitDate).format("YYYY-MM-DD HH:mm:ss"):a.quitDate="";var o=t.add?t.api.saveEmployee:t.api.upDate;t.loadingText="保存基本信息",t.saveLoading=!0,t.$http.get(o,{params:a}).then(function(e){var a=e.data;"200"==a.code?t.saveSalary(a.data.id,a.data.code,t.form.salary):(t.saveLoading=!1,t.$message.error({message:a.msg||"未知原因稍后重试",duration:2e4,showClose:!0}))}).catch(function(){t.saveLoading=!1,t.$message.error({message:"未知错误稍后重试",duration:2e4,showClose:!0})})}else t.$message.info(1==t.activeInd?"请检查您的个人和薪酬信息":"请检查您的个人信息")})},saveSalary:function(e,t,a){var o=this;o.loadingText="保存社保信息",a.employeeId=e,a.employeeCode=t;var i=o.add?o.api.addSalary:o.api.updateSalary;o.$http.get(i,{params:a}).then(function(e){var a=e.data;"200"==a.code?o.saveResume(t,o.resurmeInfo):(o.saveLoading=!1,o.$message.error({message:a.msg||"未知原因稍后重试",duration:2e4,showClose:!0}))}).catch(function(){o.saveLoading=!1,o.$message.error({message:"未知错误稍后重试",duration:2e4,showClose:!0})})},saveResume:function(e,t){var a=this;a.loadingText="保存简历信息";var o="";a.add&&!a.fromResume?(o="/candidate/addCandidate",t.deleted=1):o="/candidate/updateCandidate",t.employeecode=e,a.$http.post(o,l()(t)).then(function(e){var t=e.data;a.open=!1,a.saveLoading=!1,"S000"==t.returnCode?(a.$message.success(a.add?"新建员工成功":"编辑员工成功"),a.add&&a.fromResume&&a.$emit("update",a.resumeId)):a.$message.error({message:t.msg||"未知原因稍后重试",duration:2e4,showClose:!0})}).catch(function(){a.saveLoading=!1,a.$message.error({message:"未知错误稍后重试",duration:2e4,showClose:!0})})},getJobOrgs:function(){if(this.form.info.deptId&&this.form.info.jobId){var e=this,t={};t.deptId=e.form.info.deptId,t.jobId=e.form.info.jobId,e.$http.get(e.api.getJob+"?"+Util.parseForm(t)).then(function(t){var a=t.data;200==a.code&&(e.sels.jobOrgs=a.data)})}else this.sels.jobOrgs=[]},getWorkSystems:function(){var e=this;e.$http.get(e.api.workSystemApi).then(function(t){var a=t.data;200==a.code&&(e.sels.workTypes=a.data)})},getDefaultWorkSystem:function(){if(this.form.info.jobOrgId){var e=this;e.$http.get(e.api.getWorkSystem+"?jobOrgId="+e.form.info.jobOrgId).then(function(t){var a=t.data;200==a.code&&(e.form.info.workSystemId=a.data?a.data.id:"")})}},getLaborDispath:function(e,t){var a=this;a.$http.get(a.api.getLaborDispath+t).then(function(t){var o=t.data;200==o.code&&(a.sels[e]=o.data)})},getSalaryPerf:function(e,t){var a=this;a.$http.get(a.api.getSalaryPerf+"?jobId="+a.form.info.jobId+"&"+e+"Id="+t).then(function(t){var o=t.data;200==o.code&&o.data?a.form.info[e]=o.data[e]:a.form.info[e]="暂无"})},getJobInfo:function(){var e=this;e.$http.get(e.api.getJobInfo,{params:{jobId:e.form.info.jobId}}).then(function(t){var a=t.data;"200"==a.code&&a.data&&(e.form.info.jobTypeId=a.data.jobTypeId,e.form.info.jobTypeName=a.data.jobTypeName?a.data.jobTypeName:"暂无",e.form.info.jobGradeId=a.data.jobGradeId,e.form.info.jobGradeName=a.data.jobGradeName?a.data.jobGradeName:"暂无")})},getProbitionPeriod:function(e,t){var a=v()(e||""),o=v()(t||"");if(a.date()==o.date())a.year()==o.year()?this.form.info.probitionPeriod=o.month()-a.month():this.form.info.probitionPeriod=o.month()-a.month()+12*(o.year()-a.year());else{for(var i=1;a.add(i,"day").isBefore(o);)i++;this.form.info.probitionPeriod=Math.round(i/30*10)/10}},idCardBlur:function(){if(this.form.info.idNum){var e=Util.trim(this.form.info.idNum);/(^\d{15}$)|(^\d{17}(\d|x)$)/i.test(e)&&(15==e.length?(this.form.info.sex=e.substring(14,15)%2==0?2:1,this.form.info.dateOfBirth="19"+e.substring(6,8)+"-"+e.substring(8,10)+"-"+e.substring(10,12)):(this.form.info.sex=e.substring(16,17)%2==0?2:1,this.form.info.dateOfBirth=e.substring(6,10)+"-"+e.substring(10,12)+"-"+e.substring(12,14)))}},getAccinfoId:function(){var e=this;if(e.form.salary.householdCode&&e.form.salary.cityCode&&e.form.salary.paymentUnit){var t={};t.householdCode=e.form.salary.householdCode,t.cityCode=e.form.salary.cityCode,t.paymentUnit=e.form.salary.paymentUnit,e.$http.get(e.api.getAccinfoId,{params:t}).then(function(t){var a=t.data;"200"==a.code&&(e.form.salary.accinfoId=a.data?a.data.id:"",e.form.salary.accinfoName=a.data?a.data.name:"")})}}}},Q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addEmployee"},[a("el-button",{attrs:{type:e.type,size:"small",icon:e.add&&!e.fromResume?"el-icon-plus":""},on:{click:e.getDateById}},[e._v(e._s(e.text))]),e._v(" "),a("el-dialog",{attrs:{modal:!1,fullscreen:!0,visible:e.open,title:(e.add?"新建":"编辑")+"员工","close-on-click-modal":!1},on:{"update:visible":function(t){e.open=t},close:function(t){e.resert("aadForm")}}},[a("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.saveLoading,expression:"saveLoading",modifiers:{body:!0}}],staticClass:"post-rel clearfix allwrap",staticStyle:{overflow:"hidden"},attrs:{"element-loading-text":e.loadingText}},[a("ul",{staticClass:"tabs"},e._l(e.tabList,function(t,o){return a("li",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"tab.show"}],key:o,class:{active:e.activeInd==o},on:{click:function(t){e.activeInd=o}}},[e._v(e._s(t.label))])})),e._v(" "),a("div",{staticClass:"content"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.open&&e.activeInd<2,expression:"open&&activeInd<2"}],ref:"aadForm",attrs:{model:e.form,inline:"",rules:e.rules,"label-position":"right","label-width":"110px"}},[a("el-row",{directives:[{name:"show",rawName:"v-show",value:0==e.activeInd,expression:"activeInd==0"}]},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.name",label:"姓名",rules:e.rules["info.name"]}},[a("el-input",{attrs:{size:"small",placeholder:"输入姓名"},model:{value:e.form.info.name,callback:function(t){e.$set(e.form.info,"name",t)},expression:"form.info.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.code",label:"职员代码",rules:e.rules["info.code"]}},[a("el-input",{attrs:{size:"small",placeholder:"输入职员代码",readonly:!e.add},model:{value:e.form.info.code,callback:function(t){e.$set(e.form.info,"code",t)},expression:"form.info.code"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.mobile",label:"手机号",rules:e.rules["info.mobile"]}},[a("el-input",{attrs:{size:"small",placeholder:"输入手机号"},model:{value:e.form.info.mobile,callback:function(t){e.$set(e.form.info,"mobile",t)},expression:"form.info.mobile"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.deptId",label:"部门",rules:e.rules["info.deptId"]}},[a("hr-dept",{attrs:{size:"small",multiple:!1,"filter-org":!0},model:{value:e.form.info.deptId,callback:function(t){e.$set(e.form.info,"deptId",t)},expression:"form.info.deptId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.jobId",label:"职位",rules:e.rules["info.jobId"]}},[a("hr-position",{attrs:{size:"small","related-dept":e.form.info.deptId,"filter-org":!0},model:{value:e.form.info.jobId,callback:function(t){e.$set(e.form.info,"jobId",t)},expression:"form.info.jobId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.jobOrgId",label:"岗位",rules:e.rules["info.jobOrgId"]}},[a("el-select",{attrs:{size:"small",clearable:"",filterable:"",placeholder:"请选岗位"},model:{value:e.form.info.jobOrgId,callback:function(t){e.$set(e.form.info,"jobOrgId",t)},expression:"form.info.jobOrgId"}},e._l(e.sels.jobOrgs,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.workSystemId",label:"工作制类型",rules:e.rules["info.workSystemId"]}},[a("el-select",{attrs:{size:"small",clearable:"",filterable:"",placeholder:"请选工作制"},model:{value:e.form.info.workSystemId,callback:function(t){e.$set(e.form.info,"workSystemId",t)},expression:"form.info.workSystemId"}},e._l(e.sels.workTypes,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.idNum",label:"身份证号",rules:e.rules["info.idNum"]}},[a("el-input",{attrs:{size:"small",placeholder:"输入身份证号"},on:{blur:e.idCardBlur},model:{value:e.form.info.idNum,callback:function(t){e.$set(e.form.info,"idNum",t)},expression:"form.info.idNum"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.dateOfBirth",label:"生日",rules:e.rules["info.dateOfBirth"]}},[a("el-input",{attrs:{size:"small",placeholder:"根据身份证号自动获取",readonly:""},model:{value:e.form.info.dateOfBirth,callback:function(t){e.$set(e.form.info,"dateOfBirth",t)},expression:"form.info.dateOfBirth"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.sex",label:"性别",required:""}},[a("el-radio-group",{model:{value:e.form.info.sex,callback:function(t){e.$set(e.form.info,"sex",t)},expression:"form.info.sex"}},[a("el-radio",{attrs:{disabled:"",label:1}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{disabled:"",label:2}},[e._v("女")])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.jobState",label:"在职状态",required:""}},[a("el-radio-group",{attrs:{disabled:!e.add},model:{value:e.form.info.jobState,callback:function(t){e.$set(e.form.info,"jobState",t)},expression:"form.info.jobState"}},[a("el-radio",{attrs:{label:1}},[e._v("试用")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("在职")]),e._v(" "),a("el-radio",{attrs:{label:3,disabled:""}},[e._v("离职")])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.entryDate",label:"入职时间",rules:e.rules["info.entryDate"]}},[a("el-date-picker",{attrs:{type:"date",size:"small",clearable:"",placeholder:"请选择"},model:{value:e.form.info.entryDate,callback:function(t){e.$set(e.form.info,"entryDate",t)},expression:"form.info.entryDate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.probitionPeriod",label:"试用期",rules:e.rules["info.probitionPeriod"]}},[a("el-input",{attrs:{size:"small",disabled:!e.add,placeholder:"请输入试用期单位/月"},model:{value:e.form.info.probitionPeriod,callback:function(t){e.$set(e.form.info,"probitionPeriod",t)},expression:"form.info.probitionPeriod"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.formalDate",label:"转正时间",rules:e.rules["info.formalDate"]}},[a("el-date-picker",{attrs:{type:"date",size:"small",clearable:"","picker-options":e.formalDatePickerOptions,placeholder:"请选择"},model:{value:e.form.info.formalDate,callback:function(t){e.$set(e.form.info,"formalDate",t)},expression:"form.info.formalDate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.quitDate",label:"离职时间",rules:e.rules["info.quitDate"]}},[a("el-date-picker",{attrs:{disabled:"",type:"date",size:"small",clearable:"",placeholder:"请选择"},model:{value:e.form.info.quitDate,callback:function(t){e.$set(e.form.info,"quitDate",t)},expression:"form.info.quitDate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.email",label:"邮箱",rules:e.rules["info.email"]}},[a("el-input",{attrs:{size:"small",placeholder:"输入邮箱"},model:{value:e.form.info.email,callback:function(t){e.$set(e.form.info,"email",t)},expression:"form.info.email"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.bankCardNo",label:"银行卡号",rules:e.rules["info.bankCardNo"]}},[a("el-input",{attrs:{size:"small",placeholder:"银行卡号"},model:{value:e.form.info.bankCardNo,callback:function(t){e.$set(e.form.info,"bankCardNo",t)},expression:"form.info.bankCardNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.workMonths",label:"社会工龄"}},[a("div",{staticClass:"el-input el-input--small"},[a("el-input",{staticStyle:{width:"150px","margin-right":"5px"},attrs:{size:"small",placeholder:"请输入"},model:{value:e.form.info.workMonths,callback:function(t){e.$set(e.form.info,"workMonths",t)},expression:"form.info.workMonths"}}),e._v("月\r\n\t\t\t\t\t\t\t\t")],1)])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.requireSettlement",label:"是否需要结算"}},[a("el-radio-group",{model:{value:e.form.info.requireSettlement,callback:function(t){e.$set(e.form.info,"requireSettlement",t)},expression:"form.info.requireSettlement"}},[a("el-radio",{attrs:{label:"Y"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"N"}},[e._v("否")])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.requireAttendance",label:"是否需要考勤"}},[a("el-radio-group",{model:{value:e.form.info.requireAttendance,callback:function(t){e.$set(e.form.info,"requireAttendance",t)},expression:"form.info.requireAttendance"}},[a("el-radio",{attrs:{label:"Y"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"N"}},[e._v("否")])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"baseInfo.nativeStr",label:"籍贯",rules:[{required:!0,message:"请输入籍贯",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"请输入籍贯"},model:{value:e.form.baseInfo.nativeStr,callback:function(t){e.$set(e.form.baseInfo,"nativeStr",t)},expression:"form.baseInfo.nativeStr"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"身高",prop:"height",rules:[{pattern:/^[1-9]\d*$/,message:"请输入正整数",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"请输入身高(cm)"},model:{value:e.form.baseInfo.height,callback:function(t){e.$set(e.form.baseInfo,"height",e._n(t))},expression:"form.baseInfo.height"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"体重",prop:"weight",rules:[{pattern:/^[1-9]\d*$/,message:"请输入正整数",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"请输入体重"},model:{value:e.form.baseInfo.weight,callback:function(t){e.$set(e.form.baseInfo,"weight",e._n(t))},expression:"form.baseInfo.weight"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"政治面貌",prop:"politics"}},[a("el-select",{model:{value:e.form.baseInfo.politics,callback:function(t){e.$set(e.form.baseInfo,"politics",t)},expression:"form.baseInfo.politics"}},e._l(e.politicsOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.label}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"婚姻状况",prop:"marriage"}},[a("el-radio-group",{model:{value:e.form.baseInfo.marriage,callback:function(t){e.$set(e.form.baseInfo,"marriage",t)},expression:"form.baseInfo.marriage"}},e._l(e.checkMarriedList,function(t,o){return a("el-radio",{key:o,attrs:{label:t.value}},[e._v("\r\n\t\t\t\t\t              "+e._s(t.label)+"\r\n\t\t\t\t\t            ")])}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"是否有服兵役","label-width":"120px",prop:"escuage"}},[a("el-radio-group",{model:{value:e.form.baseInfo.escuage,callback:function(t){e.$set(e.form.baseInfo,"escuage",t)},expression:"form.baseInfo.escuage"}},e._l(e.soldierList,function(t,o){return a("el-radio",{key:o,attrs:{label:t.label}},[e._v("\r\n\t\t\t\t\t              "+e._s(t.label)+"\r\n\t\t\t\t\t            ")])}))],1)],1)],1),e._v(" "),e.canCreateSalary?[a("el-row",{directives:[{name:"show",rawName:"v-show",value:1==e.activeInd,expression:"activeInd==1"}]},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.jobTypeName",label:"职位等级"}},[a("el-input",{attrs:{size:"small",value:e.form.info.jobTypeName,placeholder:"根据所选职位自动获取",readonly:""}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.jobGradeName",label:"职位类型"}},[a("el-input",{attrs:{size:"small",value:e.form.info.jobGradeName,placeholder:"根据所选职位自动获取",readonly:""}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.salaryId",label:"基本工资档位",rules:e.rules["info.salaryId"]}},[a("el-select",{staticClass:"w130",staticStyle:{width:"130px","margin-right":"5px"},attrs:{size:"small",clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.form.info.salaryId,callback:function(t){e.$set(e.form.info,"salaryId",t)},expression:"form.info.salaryId"}},[a("el-option",{attrs:{value:0,label:"基本工资0档"}}),e._v(" "),e._l(10,function(e){return a("el-option",{key:e,attrs:{label:"基本工资"+e+"档",value:e}})})],2),e._v(" "),a("span",[e._v("金额 "+e._s(e.form.info.salary))])],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.perfId",label:"绩效档位"}},[a("el-select",{staticClass:"w130",staticStyle:{width:"130px","margin-right":"5px"},attrs:{size:"small",clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.form.info.perfId,callback:function(t){e.$set(e.form.info,"perfId",t)},expression:"form.info.perfId"}},[a("el-option",{attrs:{value:0,label:"绩效工资0档"}}),e._v(" "),e._l(5,function(e){return a("el-option",{key:e,attrs:{label:"绩效工资"+e+"档",value:e}})})],2),e._v(" "),a("span",[e._v("金额 "+e._s(e.form.info.perf))])],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.discount",label:"试用打折率",rules:e.rules["info.discount"]}},[a("el-input",{attrs:{size:"small",placeholder:"试用期折扣(0-1)"},model:{value:e.form.info.discount,callback:function(t){e.$set(e.form.info,"discount",t)},expression:"form.info.discount"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.wageForSeniorityAdd",label:"工龄工资调整值",rules:e.rules["info.wageForSeniorityAdd"]}},[a("el-input",{attrs:{size:"small",placeholder:"可精确到2位小数"},model:{value:e.form.info.wageForSeniorityAdd,callback:function(t){e.$set(e.form.info,"wageForSeniorityAdd",t)},expression:"form.info.wageForSeniorityAdd"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.otherAllowance",label:"其他补贴",rules:e.rules["info.wageForSeniorityAdd"]}},[a("el-input",{attrs:{size:"small",placeholder:"可精确到2位小数"},model:{value:e.form.info.otherAllowance,callback:function(t){e.$set(e.form.info,"otherAllowance",t)},expression:"form.info.otherAllowance"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.trafficAllowance",label:"车贴"}},[a("el-select",{attrs:{size:"small","allow-create":"",clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.form.info.trafficAllowance,callback:function(t){e.$set(e.form.info,"trafficAllowance",t)},expression:"form.info.trafficAllowance"}},e._l(e.sels.carMoneys,function(e,t){return a("el-option",{key:t,attrs:{label:e.val,value:e.val}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.foodAllowance",label:"饭贴"}},[a("el-select",{attrs:{size:"small","allow-create":"",clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.form.info.foodAllowance,callback:function(t){e.$set(e.form.info,"foodAllowance",t)},expression:"form.info.foodAllowance"}},e._l(e.sels.foodMoneys,function(e,t){return a("el-option",{key:t,attrs:{label:e.val,value:e.val}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.tradeUnions",label:"是否是工会会员"}},[a("el-radio-group",{model:{value:e.form.info.tradeUnions,callback:function(t){e.$set(e.form.info,"tradeUnions",t)},expression:"form.info.tradeUnions"}},[a("el-radio",{attrs:{label:"Y"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"N"}},[e._v("否")])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.tradeUnionsFee",label:"工会费"}},[a("el-select",{attrs:{size:"small","allow-create":"",disabled:"N"==e.form.info.tradeUnions,clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.form.info.tradeUnionsFee,callback:function(t){e.$set(e.form.info,"tradeUnionsFee",t)},expression:"form.info.tradeUnionsFee"}},e._l(e.sels.vipMoneys,function(e,t){return a("el-option",{key:t,attrs:{label:e.val,value:e.val}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"info.jobType",label:"用工属性"}},[a("el-select",{attrs:{size:"small",clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.form.info.jobType,callback:function(t){e.$set(e.form.info,"jobType",t)},expression:"form.info.jobType"}},[a("el-option",{attrs:{label:"正式",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"劳务",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"实习",value:"3"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"salary.amount",label:"社保基数",rules:e.rules["salary.amount"]}},[a("el-input",{attrs:{size:"small",placeholder:"可精确到2位小数"},model:{value:e.form.salary.amount,callback:function(t){e.$set(e.form.salary,"amount",t)},expression:"form.salary.amount"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"salary.socialSecurityNo",label:"社保账户"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入社保账户"},model:{value:e.form.salary.socialSecurityNo,callback:function(t){e.$set(e.form.salary,"socialSecurityNo",t)},expression:"form.salary.socialSecurityNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"salary.housingFundNo",label:"公积金账户"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入公积金"},model:{value:e.form.salary.housingFundNo,callback:function(t){e.$set(e.form.salary,"housingFundNo",t)},expression:"form.salary.housingFundNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"户粮性质",prop:"salary.householdCode"}},[a("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.form.salary.householdCode,callback:function(t){e.$set(e.form.salary,"householdCode",t)},expression:"form.salary.householdCode"}},e._l(e.sels.householdList,function(e){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"salary.paymentUnit",label:"缴纳单位"}},[a("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.form.salary.paymentUnit,callback:function(t){e.$set(e.form.salary,"paymentUnit",t)},expression:"form.salary.paymentUnit"}},e._l(e.sels.paymentUnitList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"salary.cityCode",label:"参保城市"}},[a("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.form.salary.cityCode,callback:function(t){e.$set(e.form.salary,"cityCode",t)},expression:"form.salary.cityCode"}},e._l(e.sels.cityList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"salary.accinfoName",label:"社保套账"}},[e.form.salary.accinfoName&&e.form.salary.accinfoName.length>13?a("el-tooltip",{attrs:{effect:"dark",content:"Bottom Center"+e.form.salary.accinfoName}},[a("el-input",{attrs:{size:"small",placeholder:"根据前边三项自动获取",readonly:""},model:{value:e.form.salary.accinfoName,callback:function(t){e.$set(e.form.salary,"accinfoName",t)},expression:"form.salary.accinfoName"}})],1):a("el-input",{attrs:{size:"small",placeholder:"根据前边三项自动获取",readonly:""},model:{value:e.form.salary.accinfoName,callback:function(t){e.$set(e.form.salary,"accinfoName",t)},expression:"form.salary.accinfoName"}})],1)],1)],1)]:e._e()],2),e._v(" "),2==e.activeInd?a("contract",{attrs:{"employee-code":e.form.info.code}}):e._e(),e._v(" "),3==e.activeInd?a("car-info",{ref:"carInfo",model:{value:e.resurmeInfo,callback:function(t){e.resurmeInfo=t},expression:"resurmeInfo"}}):e._e(),e._v(" "),4==e.activeInd?a("contact-info",{ref:"contactInfo",model:{value:e.resurmeInfo,callback:function(t){e.resurmeInfo=t},expression:"resurmeInfo"}}):e._e(),e._v(" "),5==e.activeInd?a("family-info",{ref:"familyInfo",model:{value:e.resurmeInfo,callback:function(t){e.resurmeInfo=t},expression:"resurmeInfo"}}):e._e(),e._v(" "),6==e.activeInd?a("education-info",{ref:"educationInfo",model:{value:e.resurmeInfo,callback:function(t){e.resurmeInfo=t},expression:"resurmeInfo"}}):e._e(),e._v(" "),7==e.activeInd?a("work-info",{ref:"workInfo",model:{value:e.resurmeInfo,callback:function(t){e.resurmeInfo=t},expression:"resurmeInfo"}}):e._e(),e._v(" "),8==e.activeInd?a("skill-info",{ref:"skillInfo",model:{value:e.resurmeInfo,callback:function(t){e.resurmeInfo=t},expression:"resurmeInfo"}}):e._e(),e._v(" "),9==e.activeInd?a("complaint-info",{ref:"complaintInfo",model:{value:e.resurmeInfo,callback:function(t){e.resurmeInfo=t},expression:"resurmeInfo"}}):e._e()],1)]),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:function(t){e.save("aadForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){e.resert("aadForm")}}},[e._v("取消")])],1)])],1)},staticRenderFns:[]},Z=a("OF7X")(V,Q,!1,function(e){a("Zz5J")},null,null).exports,ee={name:"ctrl-layout",props:{cardShow:{type:Boolean,default:!0},isFirst:{type:Boolean,default:!1}}},te={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"layout contentWrap"},[this._t("layout-header"),this._v(" "),t("div",{staticClass:"layout-content"},[this.cardShow?t("el-card",[this._t("query")],2):this._e(),this._v(" "),this.isFirst?t("div",{staticClass:"text-center firstOpen"},[this._v("请进行检索获取数据")]):[t("div",{staticClass:"content-header"},[this._t("content-header")],2),this._v(" "),this._t("default"),this._v(" "),t("div",{staticClass:"page"},[this._t("page")],2)]],2)],2)},staticRenderFns:[]},ae=[{id:1,state:"试用"},{id:2,state:"在职"},{id:3,state:"离职"}],oe={components:{createEmployee:Z,pageTop:D,CtrlLayout:a("OF7X")(ee,te,!1,function(e){a("8zwx")},"data-v-7e47cab3",null).exports,hrDept:_,hrPosition:I},data:function(){return{firstOpen:!0,listLoading:!1,employeeList:[],dialogVisible:!1,page:1,pageSize:10,popShow:!1,isloading:!1,states:ae,message:{},hadFinger:!0,hadFace:!0,viewMemberData:[],viewMemberLoading:!1,showViewMember:!1,searchLoading:!1,memberIds:"",quitDate:"",editMember:!1,selDepts:"",gatherMsgList:[{state:"未采集",type:1},{state:"部分采集",type:2},{state:"已采集",type:3}],employeeFormRules:{name:[{required:!0,message:"请输入员工姓名",trigger:"blur"}],code:[{required:!0,message:"请输入员工代码",trigger:"blur"}]},selJobState:1,deptSel:!1,salarys:[],perfs:[],deptsPlus:[],userMsg:{},sels:"",httpUrl:{listUrl:m+"/api/employee/list",dimission:m+"/api/employee/dimission",exportEmployee:m+"/api/employee/export",getByCodes:m+"/api/employee/staff"},param:{keyword:"",deptIds:[],jobId:[],jobStates:[1,2,3],gatherMsgStates:[1,2,3],entryDateFrom:"",entryDateTo:"",formalDateFrom:"",formalDateTo:"",quitDateFrom:"",quitDateTo:""},leftList:[{id:1,text:"员工信息",link:"${ctx}/route/employee/employeeList;"}],searchTxt:"",departmentData:[],pickOptions:{disabledDate:function(e){var t=new Date;return t.setDate(1),e.getTime()<t.getTime()-864e5}}}},methods:{getStaffList:function(e){var t=this;t.firstOpen&&(t.firstOpen=!1);var a={};e&&(t.page=e),t.searchLoading=!0,a.entryDateFrom=t.dateToTimestamp(t.param.entryDateFrom),a.entryDateTo=t.dateToTimestamp(t.param.entryDateTo),a.formalDateFrom=t.dateToTimestamp(t.param.formalDateFrom),a.formalDateTo=t.dateToTimestamp(t.param.formalDateTo),a.quitDateFrom=t.dateToTimestamp(t.param.quitDateFrom),a.quitDateTo=t.dateToTimestamp(t.param.quitDateTo),a.jobStates=t.param.jobStates.join(","),a.gatherMsgStates=t.param.gatherMsgStates.join(","),a.deptIds=t.param.deptIds.join(","),a.jobIds=t.param.jobId.join(","),a.pageSize=t.pageSize,a.page=t.page,a.keyword=t.param.keyword,t.isloading=!0,t.$http.get(t.httpUrl.listUrl+"?"+Util.parseForm(a)).then(function(e){var a=e.data;t.searchLoading=!1,t.isloading=!1,t.employeeList=a.data;for(var o=0;o<t.employeeList.list.length;o++){var i=t.employeeList.list[o];null!=i.entryDate&&(i.entryDate=new Date(i.entryDate).format("yyyy-MM-dd")),null!=i.formalDate&&(i.formalDate=new Date(i.formalDate).format("yyyy-MM-dd")),null!=i.quitDate&&(i.quitDate=new Date(i.quitDate).format("yyyy-MM-dd"));for(var r=0;r<ae.length;r++)i.jobState==ae[r].id&&(t.$set(i,"jobStateName",ae[r].state),t.$set(i,"jobStateId",ae[r].id))}})},dateToTimestamp:function(e){return e?e.getTime():null},showViewMemberCut:function(){this.memberIds=this.sels,this.viewMemberData=[],this.quitDate="",this.showViewMember=!1},selsChange:function(e){var t=[];e.forEach(function(e){t.push(e.code)}),this.sels=t.join(","),this.memberIds=t.join(",")},handleSizeChange:function(e){this.page=e,this.getStaffList()},sizeChange:function(e){this.pageSize=e,this.getStaffList()},showViewMemberToggle:function(){this.getByCodes()},getByCodes:function(){var e=this;return""==e.memberIds?(e.showViewMember=!0,!1):(e.$http.get(e.httpUrl.getByCodes+"?codes="+e.memberIds).then(function(t){var a=t.data;e.viewMemberData=a.data,e.viewMemberData.length>0&&e.viewMemberData.length==e.memberIds.split(",").length?e.showViewMember=!0:e.$message({message:"您选择的用户不存在或已离职!",duration:2e4,showClose:!0})}),!1)},confirmQuit:function(){var e=this,t=null;e.quitDate&&(t=Date.parse(new Date(e.quitDate))),0==e.viewMemberData.length?e.$message({message:"数据不能为空!",duration:2e4,showClose:!0}):null==t?e.$message({message:"请设置离职时间!",duration:2e4,showClose:!0}):e.$confirm("确认设置批量离职吗","提示",{type:"info"}).then(function(){e.listLoading=!0;var a={codes:e.memberIds,quitDate:t};e.$http.post(e.httpUrl.dimission,l()(a)).then(function(t){var a=t.data;"200"==a.code?(e.$message.success("批量设置成功！"),e.listLoading=!1,e.showViewMemberCut(),e.getStaffList()):e.$message.error({message:a.msg,duration:2e4,showClose:!0})})})},exportEmployee:function(){var e={};e.entryDateFrom=this.dateToTimestamp(this.param.entryDateFrom),e.entryDateTo=this.dateToTimestamp(this.param.entryDateTo),e.formalDateFrom=this.dateToTimestamp(this.param.formalDateFrom),e.formalDateTo=this.dateToTimestamp(this.param.formalDateTo),e.quitDateFrom=this.dateToTimestamp(this.param.quitDateFrom),e.quitDateTo=this.dateToTimestamp(this.param.quitDateTo),e.jobStates=this.param.jobStates.join(","),e.gatherMsgStates=this.param.gatherMsgStates.join(","),e.deptIds=this.param.deptIds.join(","),e.jobIds=this.param.jobId.join(","),e.keyword=this.param.keyword,window.open(this.httpUrl.exportEmployee+"?"+Util.parseForm(e))}}},ie={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ctrl-layout",{attrs:{"is-first":e.firstOpen}},[a("div",{staticClass:"content-header",attrs:{slot:"layout-header"},slot:"layout-header"},[a("page-top",{attrs:{"page-title":"简历管理","page-description":"可点击姓名链接查看具体简历内容"}},[a("create-employee",{attrs:{add:!0}})],1)],1),e._v(" "),a("div",{attrs:{slot:"query"},slot:"query"},[a("el-form",{ref:"paramForm",staticClass:"checkParam selForm",attrs:{model:e.param,inline:"","label-position":"left","label-width":"70px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"deptIds",label:"选择部门"}},[a("hr-dept",{model:{value:e.param.deptIds,callback:function(t){e.$set(e.param,"deptIds",t)},expression:"param.deptIds"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"jobId",label:"选择职位"}},[a("hr-position",{attrs:{size:"mini","related-dept":e.param.deptIds,multiple:!0},model:{value:e.param.jobId,callback:function(t){e.$set(e.param,"jobId",t)},expression:"param.jobId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"keyword",label:"筛选员工"}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入职员姓名或代码"},model:{value:e.param.keyword,callback:function(t){e.$set(e.param,"keyword",t)},expression:"param.keyword"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"入司时间"}},[a("el-form-item",{attrs:{prop:"entryDateFrom"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"开始日期",size:"mini"},model:{value:e.param.entryDateFrom,callback:function(t){e.$set(e.param,"entryDateFrom",t)},expression:"param.entryDateFrom"}})],1),e._v("\n\t\t\t\t\t  \t\t-\n\t\t\t\t\t  \t\t"),a("el-form-item",{attrs:{prop:"entryDateTo"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"结束日期",size:"mini"},model:{value:e.param.entryDateTo,callback:function(t){e.$set(e.param,"entryDateTo",t)},expression:"param.entryDateTo"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"转正时间"}},[a("el-form-item",{attrs:{prop:"formalDateFrom"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"开始日期",size:"mini"},model:{value:e.param.formalDateFrom,callback:function(t){e.$set(e.param,"formalDateFrom",t)},expression:"param.formalDateFrom"}})],1),e._v("\n\t\t\t\t\t  \t-\n\t\t\t\t\t  \t\t"),a("el-form-item",{attrs:{prop:"formalDateTo"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"结束日期",size:"mini"},model:{value:e.param.formalDateTo,callback:function(t){e.$set(e.param,"formalDateTo",t)},expression:"param.formalDateTo"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"离职时间"}},[a("el-form-item",{attrs:{prop:"quitDateFrom"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"开始日期",size:"mini"},model:{value:e.param.quitDateFrom,callback:function(t){e.$set(e.param,"quitDateFrom",t)},expression:"param.quitDateFrom"}})],1),e._v("\n\t\t\t\t\t  \t\t-\n\t\t\t\t\t  \t\t"),a("el-form-item",{attrs:{prop:"quitDateTo"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"结束日期",size:"mini"},model:{value:e.param.quitDateTo,callback:function(t){e.$set(e.param,"quitDateTo",t)},expression:"param.quitDateTo"}})],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"jobStates",label:"在职状态"}},[a("el-checkbox-group",{attrs:{min:1},model:{value:e.param.jobStates,callback:function(t){e.$set(e.param,"jobStates",t)},expression:"param.jobStates"}},e._l(e.states,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.state))])}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"gatherMsgStates",label:"采集状态"}},[a("el-checkbox-group",{attrs:{min:1},model:{value:e.param.gatherMsgStates,callback:function(t){e.$set(e.param,"gatherMsgStates",t)},expression:"param.gatherMsgStates"}},e._l(e.gatherMsgList,function(t,o){return a("el-checkbox",{key:o,attrs:{label:t.type}},[e._v(e._s(t.state))])}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"text-center submit"},[a("el-button",{staticClass:"el-button ",attrs:{type:"primary",size:"mini",loading:e.searchLoading},on:{click:function(t){e.getStaffList(1)}}},[e._v(" 检索 \n\t\t\t\t\t\t")]),e._v(" "),a("el-button",{staticClass:"el-button",attrs:{type:"button",size:"mini"},on:{click:function(t){e.$refs.paramForm.resetFields()}}},[a("span",[e._v("重置")])])],1)],1)],1)],1)],1),e._v(" "),a("template",{slot:"content-header"},[a("el-button",{staticClass:"iconfont icon-leave",attrs:{type:"primary",size:"mini"},on:{click:function(t){t.stopPropagation(),e.showViewMemberToggle(t)}}},[e._v(" 离职")]),e._v(" "),a("el-button",{staticClass:"iconfont icon-export",attrs:{type:"primary",size:"mini"},on:{click:function(t){t.stopPropagation(),e.exportEmployee(t)}}},[e._v(" 导出")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isloading,expression:"isloading"}],attrs:{data:e.employeeList.list,stripe:""},on:{"selection-change":e.selsChange}},[a("el-table-column",{attrs:{label:"全选",type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{label:"姓名",align:"center",prop:"name","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"职员代码",align:"center",prop:"code","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"部门名称",align:"center",prop:"deptName","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"职位",align:"center",prop:"jobName","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"岗位",align:"center",prop:"jobOrgName","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"在职状态",align:"center",prop:"jobStateName","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"入司时间",align:"center",prop:"entryDate","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"转正时间",align:"center",prop:"formalDate","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"离职时间",align:"center",prop:"quitDate","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{colspan:"2",align:"center",label:"操作",width:"150px","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("create-employee",{attrs:{add:!1,type:"text",text:"编辑",code:t.row.code,id:t.row.id},on:{update:function(t){e.getStaffList(1)}}})]}}])})],1),e._v(" "),e.employeeList.totalCount>0?a("div",{staticClass:"pagination",attrs:{slot:"page"},slot:"page"},[a("el-pagination",{attrs:{layout:"total,sizes,prev,pager,next,jumper","current-page":e.page,"page-size":e.pageSize,total:e.employeeList.totalCount,"page-sizes":[10,20,30]},on:{"current-change":e.handleSizeChange,"size-change":e.sizeChange}})],1):e._e(),e._v(" "),a("el-dialog",{attrs:{visible:e.showViewMember,"close-on-click-modal":!1,size:"tiny",title:"离职","before-close":e.showViewMemberCut},on:{"update:visible":function(t){e.showViewMember=t}}},[a("div",{staticClass:"viewMember"},[a("el-form",{attrs:{"label-position":"right","label-width":"80px",onsubmit:"return false"}},[a("el-form-item",{attrs:{label:"员工代码"}},[a("el-input",{attrs:{placeholder:"支持多选,请用英文逗号分隔",icon:"search","on-icon-click":e.getByCodes},nativeOn:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.getByCodes(t)}},model:{value:e.memberIds,callback:function(t){e.memberIds=t},expression:"memberIds"}})],1)],1),e._v(" "),a("div",{staticClass:"viewMemberBd",staticStyle:{"margin-bottom":"20px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.viewMemberLoading,expression:"viewMemberLoading"}],ref:"etMember",attrs:{data:e.viewMemberData,stripe:"","empty-text":"查询的员工不存在或已离职",height:"200"}},[a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code",align:"center",label:"职员代码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deptName",align:"center",label:"部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"jobName",align:"center",label:"职位"}})],1)],1),e._v(" "),a("el-form",{attrs:{"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"离职日期"}},[a("el-date-picker",{staticClass:"quit-date-date",attrs:{type:"date",placeholder:"请选择离职日期","picker-options":e.pickOptions},model:{value:e.quitDate,callback:function(t){e.quitDate=t},expression:"quitDate"}})],1)],1),e._v(" "),a("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:12,offset:10}},[a("el-button",{attrs:{type:"primary",loading:e.listLoading},on:{click:function(t){t.stopPropagation(),e.confirmQuit(t)}}},[e._v("确定")])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-button",{on:{click:e.showViewMemberCut}},[e._v("取消")])],1)],1)],1)])],2)},staticRenderFns:[]},re=a("OF7X")(oe,ie,!1,function(e){a("BujW")},null,null).exports,se=a("uAC3"),ne=a.n(se),le=a("CRx+"),ce=a("FDFR"),de=a.n(ce),fe={data:function(){return{menus:[],token:ne.a.get("HR_TOKEN")||"",api:{getMenu:p+"/api/menu/queryGroup"}}},created:function(){this.getMenus()},computed:{test:function(){return["http://hr.ta-q-bin.com.cn","114.80.227.222:8080"].indexOf(location.origin)<0},user:function(){var e={},t=ne.a.get("HR_USER");return t&&(e=JSON.parse(le.Base64.decode(t))),e}},methods:{getMenus:function(){var e=this;this.$http.get(this.api.getMenu,{baseURL:p}).then(function(t){200==t.data.code?e.menus=t.data.data:ce.Message.error(t.data.msg)})},outlogin:function(){location.href=p+"/api/user/loginOut?token="+this.token}}},pe={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"header-user"},[o("div",{staticClass:"header-user-content"},[o("div",{staticClass:"left"},[e._m(0),e._v(" "),o("p",{staticClass:"company"},[e._v("YCTHR"+e._s(e.test?"(测试)":""))]),e._v(" "),e._m(1)]),e._v(" "),o("div",{staticClass:"nav"},[e._l(e.menus,function(t,a){return[o("p",[1==t.status?o("a",{attrs:{href:t.url}},[o("el-button",{class:{on:"EMPLOYEE_MODULE"==t.code}},[e._v(e._s(t.name))])],1):e._e()])]})],2),e._v(" "),o("div",{staticClass:"right"},[o("div",{staticClass:"manage-center"},[o("el-dropdown",[o("span",{staticClass:"el-dropdown-link"},[o("i",{staticClass:"el-icon-setting"}),e._v("  管理中心"),o("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"})],1)],1),e._v(" "),o("div",{staticClass:"user-info"},[o("el-dropdown",{on:{command:e.outlogin}},[o("span",{staticClass:"el-dropdown-link"},[o("img",{staticClass:"user-avatar",attrs:{src:a("ZyW+")}}),e._v(" "),o("span",[e._v(e._s(e.user.realName))]),o("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{command:"退出"}},[e._v("退出")])],1)],1)],1)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"dis-flex"},[t("img",{staticClass:"logo",staticStyle:{"margin-right":"5px"},attrs:{src:a("IlZs"),height:"40px"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("i",{staticClass:"el-icon-menu"})])}]},me={data:function(){return{routerMenus:[{name:"employeeList",label:"员工",label2:"信息"}]}},components:{VHeader:a("OF7X")(fe,pe,!1,function(e){a("l72y"),a("zaBh")},null,null).exports}},ue={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-view"},[a("v-header"),e._v(" "),a("div",{staticClass:"content-menu"},e._l(e.routerMenus,function(t,o){return a("router-link",{key:o,attrs:{to:{name:t.name}}},[a("el-button",[a("p",[a("span",[e._v(e._s(t.label))])]),e._v(" "),a("p",[a("span",[e._v(e._s(t.label2))])])])],1)})),e._v(" "),a("div",{staticClass:"user-content-route"},[a("router-view")],1)],1)},staticRenderFns:[]},he=a("OF7X")(me,ue,!1,function(e){a("QbZd")},"data-v-f997b0e0",null).exports;o.default.use(s.a);var be=new s.a({mode:"hash",routes:[{path:"/",component:he,children:[{path:"/",redirect:"employeeList"},{path:"/employeeList",name:"employeeList",component:re}]}]}),ve=a("rVsN"),ge=a.n(ve),ye=a("2sCs"),_e=a.n(ye);_e.a.defaults.baseURL=f,_e.a.defaults.timeout=2e5,_e.a.defaults.headers={"Content-Type":"application/json;charset=utf-8"},_e.a.interceptors.request.use(function(e){return ne.a.get("HR_TOKEN")&&(e.headers.withCredentials=!0,e.headers.HR_TOKEN=ne.a.get("HR_TOKEN")),e},function(e){return ge.a.reject(e)}),_e.a.interceptors.response.use(function(e){if(1==e.data.loginState&&location.href.indexOf("/resume/shengao")<0){var t=location.href.indexOf("?");location.href=p+"/login?redirectUrl="+le.Base64.encode(t>0?location.href.substring(0,t):location.href)}return"S000"!=e.data.returnCode&&"200"!=e.data.code&&ce.Message.error({message:u[e.data.returnCode]||u.other,showClose:!0,duration:5e3}),e},function(e){return ce.Message.error({message:u.other,showClose:!0}),ge.a.reject(e)});var ke=_e.a,we=a("MqOw"),Ie=a.n(we);!function(e,t,a){var o={};o.copyObject=function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])},o.addVueDataProperty=function(e,t,a,o){if(t instanceof Array)for(var i=0;i<t.length;i++){var r=t[i];e.$set(r,a,o)}else e.$set(t,a,o)},o.getUrlParam=function(e){for(var t=location.search,a=(t=t.substring(1,t.length)).split("&"),o=new Object,i=0;i<a.length;i++){var r=a[i].split("=");o[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return o[e]},o.getFullImagePath=function(e,t){return e.indexOf("http")>-1?e:t+e},o.propsArrayToString=function(e){for(var t=[],a=0;a<e.length;a++){var o=e[a];t.push(o.id+":"+o.value)}return t.join(",")},o.parseParam=function(e,t){var a="";if(e instanceof String||e instanceof Number||e instanceof Boolean){(r=encodeURIComponent(e))&&(a+="&"+t+"="+r)}else{var o=0;for(var i in e){var r,s=null==t?o:t+(e instanceof Array?"["+o+"]":"."+o);(r=this.parseParam(this,s))&&(a+="&"+r),o++}}return a.substr(1)},o.trim=function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},o.parseForm=function(e){var t="";if("String"==o.getType(e))t=e;else if("Object"==o.getType(e)){for(var a in e)if("String"==o.getType(e[a])||"Number"==o.getType(e[a])||"Boolean"==o.getType(e[a])){(n=encodeURIComponent(e[a]))&&(t+="&"+a+"="+n)}else if("Array"==o.getType(e[a]))for(var i=e[a],r=0;r<i.length;r++)for(var s in i[r]){var n;t+="&"+a+"["+r+"]."+s+"="+(n=encodeURIComponent(i[r][s]))}t=t.substr(1)}return t},o.getType=function(e){var t=Object.prototype.toString.call(e);return t.substring(8,t.length-1)},e.Util=o}(window,o.default,_e.a);a("0qmK");o.default.config.productionTip=!1,o.default.use(Ie.a,ke),o.default.use(de.a),be.beforeEach(function(e,t,a){if(h.indexOf(e.name)<0){if(e.query&&e.query.token){var o=le.Base64.decode(e.query.token),i=o.indexOf("_"),r=o.substring(i+1),s=o.substring(0,i);ne.a.set("HR_USER",s),ne.a.set("HR_TOKEN",r)}if(!ne.a.get("HR_TOKEN")){var n=location.href.indexOf("?");location.href=p+"/login?redirectUrl="+le.Base64.encode(n>0?location.href.substring(0,n):location.href)}}a()}),new o.default({el:"#app",router:be,template:"<App/>",components:{App:r}})},QbZd:function(e,t){},WtBP:function(e,t){},XBGE:function(e,t){},"ZyW+":function(e,t,a){e.exports=a.p+"static/img/people.c95b88c.png"},Zz5J:function(e,t){},cept:function(e,t){},l72y:function(e,t){},o01P:function(e,t){},pLCs:function(e,t){},qQym:function(e,t){},rf53:function(e,t){},ur6g:function(e,t){},xR5h:function(e,t){},zYgB:function(e,t){},zaBh:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.e3bdf57dcb83007561d1.js.map